<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doodle World Tools</title>
    <style>
        :root {
            --bg-color: #121212;
            --text-color: #ffffff;
            --main-bg: #1e1e1e;
            --card-bg: #2a2a2a;
            --card-border: none;
            --button-bg: #444;
            --button-hover: #555;
            --input-bg: #333;
            --input-border: #444;
            --shadow: rgba(0, 0, 0, 0.3);
            --active-team: #4CAF50;
            --header-color: #ffffff;
            --section-border: #444;
            --expand-bg: #333;
            --nav-bg: #1a1a1a;
            --nav-active: #333;
            --nav-box-bg: #2a2a2a;
            --nav-box-hover: #333;
            
            --mythic-color: #b19cd9;
            --fire-color: #ff8c00;
            --water-color: #1e90ff;
            --plant-color: #4CAF50;
            --spark-color: #FFEB3B;
            --beast-color: #8B4513;
            --air-color: #87CEFA;
            --insect-color: #6CC417;
            --earth-color: #CD853F;
            --mind-color: #FFB6C1;
            --melee-color: #ff6b6b;
            --food-color: #f5deb3;
            --light-color: #fffacd;
            --crystal-color: #00ced1;
            --metal-color: #a9a9a9;
            --spirit-color: #9400d3;
            --ice-color: #e0ffff;
            --dark-color: #000000;
            --poison-color: #da70d6;
            --basic-color: #cccccc;
        }

        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
            color: var(--text-color);
        }

        body {
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        .nav-container {
            background-color: var(--nav-bg);
            padding: 10px 0;
            box-shadow: 0 2px 10px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            margin-bottom: 20px;
        }

        .nav-menu {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            list-style: none;
            padding: 0 20px;
            gap: 10px;
        }

        .nav-item {
            flex: 1;
        }

        .nav-button {
            width: 100%;
            background: var(--nav-box-bg);
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: none;
            text-align: center;
            border-radius: 8px;
        }

        .nav-button:hover {
            background-color: var(--nav-box-hover);
        }

        .nav-button.active {
            background-color: var(--nav-active);
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: var(--main-bg);
            border-radius: 0;
            padding: 20px;
            box-shadow: 0 4px 12px var(--shadow);
            min-height: calc(100vh - 100px);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: var(--header-color);
            margin: 0;
            font-size: 28px;
            font-weight: bold;
        }

        .team-management {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .team-selector {
            display: flex;
            gap: 10px;
            align-items: center;
            flex: 1;
        }

        .team-selector select {
            flex: 1;
            padding: 10px;
            border-radius: 0;
            border: 1px solid var(--input-border);
            background-color: var(--input-bg);
            min-width: 150px;
        }

        .team-actions {
            display: flex;
            gap: 10px;
        }

        .team-action-btn {
            background-color: var(--button-bg);
            border: none;
            border-radius: 0;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: bold;
            white-space: nowrap;
        }

        .team-name-input {
            padding: 12px;
            border-radius: 0;
            border: 1px solid var(--input-border);
            background-color: var(--input-bg);
            font-size: 16px;
            flex: 1;
            min-width: 200px;
        }

        .doodle-creation {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .doodle-selector {
            display: flex;
            gap: 10px;
            flex: 1;
            position: relative;
        }

        .custom-dropdown {
            position: relative;
            flex: 1;
        }

        .dropdown-header {
            padding: 10px;
            border: 1px solid var(--input-border);
            background-color: var(--input-bg);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dropdown-list {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
            background-color: var(--input-bg);
            border: 1px solid var(--input-border);
            border-top: none;
            z-index: 1000;
            display: none;
        }

        .dropdown-list.active {
            display: block;
        }

        .dropdown-search {
            width: 100%;
            padding: 8px;
            border: none;
            border-bottom: 1px solid var(--input-border);
            background-color: var(--input-bg);
            color: var(--text-color);
        }

        .dropdown-options {
            max-height: 250px;
            overflow-y: auto;
        }

        .dropdown-option {
            padding: 8px 10px;
            cursor: pointer;
            border-bottom: 1px solid var(--section-border);
        }

        .dropdown-option:hover {
            background-color: var(--button-bg);
        }

        .dropdown-option.selected {
            background-color: var(--button-hover);
        }

        .add-doodle-btn {
            background-color: var(--button-bg);
            border: none;
            border-radius: 0;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            white-space: nowrap;
        }

        .team-display {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .doodle-card {
            background-color: var(--card-bg);
            border: none;
            border-radius: 0;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
            position: relative;
            cursor: move;
        }

        .doodle-card.dragging {
            opacity: 0.5;
        }

        .doodle-card.drag-over {
            border: 2px dashed var(--button-hover);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .doodle-sprite-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .doodle-sprite {
            width: 100px;
            height: 100px;
            background-color: var(--input-border);
            border-radius: 0;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .doodle-info {
            flex: 1;
        }

        .doodle-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .type-badges {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-top: 5px;
        }

        .type-badge {
            padding: 3px 8px;
            border-radius: 0;
            font-size: 12px;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .type-icon {
            width: 16px;
            height: 16px;
            display: inline-block;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .card-buttons {
            display: flex;
            gap: 8px;
        }

        .card-btn {
            background: var(--button-bg);
            border: none;
            border-radius: 0;
            padding: 6px 12px;
            font-size: 13px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .card-btn:hover {
            background: var(--button-hover);
        }

        .expand-section {
            display: none;
            margin-top: 15px;
            background-color: var(--expand-bg);
            padding: 15px;
            border-radius: 0;
            box-shadow: 0 2px 6px var(--shadow);
            font-size: 14px;
        }

        .expand-section.active {
            display: block;
        }

        .section-title {
            font-size: 16px;
            margin: 15px 0 10px 0;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--section-border);
        }

        .moves-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .moves-container select {
            width: 100%;
            font-size: 14px;
            padding: 8px;
            margin: 3px 0;
            background-color: var(--input-bg);
            border: 1px solid var(--input-border);
            border-radius: 0;
            display: flex;
            align-items: center;
        }

        .move-mythic, .move-mythic option {
            color: var(--mythic-color) !important;
        }

        .move-fire, .move-fire option {
            color: var(--fire-color) !important;
        }

        .move-water, .move-water option {
            color: var(--water-color) !important;
        }

        .move-plant, .move-plant option {
            color: var(--plant-color) !important;
        }

        .move-spark, .move-spark option {
            color: var(--spark-color) !important;
        }

        .move-beast, .move-beast option {
            color: var(--beast-color) !important;
        }

        .move-air, .move-air option {
            color: var(--air-color) !important;
        }

        .move-insect, .move-insect option {
            color: var(--insect-color) !important;
        }

        .move-earth, .move-earth option {
            color: var(--earth-color) !important;
        }

        .move-mind, .move-mind option {
            color: var(--mind-color) !important;
        }

        .move-melee, .move-melee option {
            color: var(--melee-color) !important;
        }

        .move-food, .move-food option {
            color: var(--food-color) !important;
        }

        .move-light, .move-light option {
            color: var(--light-color) !important;
        }

        .move-crystal, .move-crystal option {
            color: var(--crystal-color) !important;
        }

        .move-metal, .move-metal option {
            color: var(--metal-color) !important;
        }

        .move-spirit, .move-spirit option {
            color: var(--spirit-color) !important;
        }

        .move-ice, .move-ice option {
            color: var(--ice-color) !important;
        }

        .move-dark, .move-dark option {
            color: var(--dark-color) !important;
        }

        .move-poison, .move-poison option {
            color: var(--poison-color) !important;
        }

        .move-basic, .move-basic option {
            color: var(--basic-color) !important;
        }

        .moves-container select option {
            background-color: var(--input-bg);
            color: var(--text-color);
        }

        .moves-container select:not([class*="move-"]) {
            color: var(--text-color);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            background-color: var(--button-bg);
            border: none;
            border-radius: 0;
            padding: 10px 16px;
            cursor: pointer;
            font-weight: bold;
        }

        .calculator-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .calculator-box {
            border: 2px solid var(--section-border);
            padding: 20px;
            background: var(--card-bg);
            text-align: left;
            border-radius: 0;
            position: relative;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .calculator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--section-border);
        }

        .remove-calc {
            background: var(--button-bg);
            color: var(--text-color);
            border: none;
            border-radius: 0;
            width: 32px;
            height: 32px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .remove-calc:hover {
            background: #ff4444;
        }

        .type-select-container {
            margin-bottom: 15px;
        }

        .type-select {
            padding: 12px;
            width: 100%;
            border: 1px solid var(--input-border);
            border-radius: 0;
            background-color: var(--input-bg);
            color: var(--text-color);
            margin-bottom: 12px;
            box-shadow: 0 2px 4px var(--shadow);
            font-size: 14px;
        }

        .add-type-btn {
            background-color: var(--button-bg);
            color: var(--text-color);
            border: none;
            padding: 8px 16px;
            border-radius: 0;
            cursor: pointer;
            margin-top: 5px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .add-type-btn:hover {
            background-color: var(--button-hover);
        }

        .result-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--text-color);
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .result-list {
            min-height: 40px;
            padding: 15px;
            background: var(--input-bg);
            border-radius: 0;
            border: 1px solid var(--input-border);
            margin-bottom: 15px;
            color: var(--text-color);
            box-shadow: inset 0 2px 4px var(--shadow);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .calc-type-badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px 6px 40px;
            border-radius: 0;
            color: white;
            font-size: 13px;
            font-weight: bold;
            white-space: nowrap;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px var(--shadow);
        }

        .calc-type-badge .type-icon {
            position: absolute;
            left: 12px;
            width: 16px;
            height: 16px;
            display: inline-block;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .team-summary {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 0;
            border: 1px solid var(--section-border);
            margin-top: 30px;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .summary-box {
            padding: 20px;
            background: var(--input-bg);
            border-radius: 0;
            border: 1px solid var(--section-border);
            min-height: 140px;
            box-shadow: 0 4px 8px var(--shadow);
            transition: all 0.3s ease;
        }

        .summary-title {
            font-weight: bold;
            margin-bottom: 12px;
            color: var(--text-color);
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .none {
            color: #666;
            font-style: italic;
        }

        .add-doodle-calc {
            background: var(--button-bg);
            color: var(--text-color);
            border: none;
            padding: 14px 28px;
            border-radius: 0;
            cursor: pointer;
            margin: 20px 0;
            box-shadow: 0 4px 8px var(--shadow);
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 16px;
        }

        .add-doodle-calc:hover {
            background: var(--button-hover);
        }

        .save-load-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .save-btn, .load-btn {
            background-color: var(--button-bg);
            color: var(--text-color);
            border: none;
            padding: 10px 20px;
            border-radius: 0;
            cursor: pointer;
            box-shadow: 0 2px 4px var(--shadow);
            transition: all 0.3s ease;
        }

        .save-btn:hover, .load-btn:hover {
            background-color: var(--button-hover);
        }

        .type-count {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0;
            padding: 2px 8px;
            margin-left: 8px;
            font-size: 12px;
        }

        .footer {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--section-border);
            flex-wrap: wrap;
        }

        .credits, .update-info {
            font-size: 14px;
        }

        .stats-container, .equipment-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .stats-container select, .equipment-container select {
            width: 100%;
            padding: 8px;
            background-color: var(--input-bg);
            border: 1px solid var(--input-border);
            border-radius: 0;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .team-management, .doodle-creation {
                flex-direction: column;
            }
            
            .team-selector, .doodle-selector {
                flex-direction: column;
            }
            
            .doodle-sprite-container {
                flex-direction: column;
                text-align: center;
            }
            
            .controls {
                flex-wrap: wrap;
            }
            
            .footer {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .moves-container, .stats-container, .equipment-container {
                grid-template-columns: 1fr;
            }
            
            .calculator-container {
                grid-template-columns: 1fr;
            }
            
            .summary-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .nav-menu {
                flex-direction: column;
            }
        }

        @media (max-width: 600px) {
            .summary-grid {
                grid-template-columns: 1fr;
            }
            
            .save-load-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="nav-container">
        <ul class="nav-menu">
            <li class="nav-item">
                <button class="nav-button active" data-page="teambuilder">Teambuilder</button>
            </li>
            <li class="nav-item">
                <button class="nav-button" data-page="defensive">Defensive Calculator</button>
            </li>
            <li class="nav-item">
                <button class="nav-button" data-page="offensive">Offensive Calculator</button>
            </li>
        </ul>
    </div>

    <div class="main-container">
        <!-- Teambuilder Page -->
        <div class="page active" id="teambuilder">
            <div class="header">
                <h1>Doodle World Teambuilder</h1>
            </div>
            
            <div class="team-management">
                <div class="team-selector">
                    <select id="team-select">
                        <option value="">Select a Team</option>
                    </select>
                    <div class="team-actions">
                        <button class="team-action-btn" id="add-team">Add Team</button>
                        <button class="team-action-btn" id="delete-team">Delete Team</button>
                    </div>
                </div>
                <input type="text" class="team-name-input" id="team-name" placeholder="Enter team name...">
            </div>
            
            <div class="doodle-creation">
                <div class="custom-dropdown" id="doodle-dropdown">
                    <div class="dropdown-header" id="doodle-header">
                        <span>Select a Doodle</span>
                        <span>▼</span>
                    </div>
                    <div class="dropdown-list" id="doodle-list">
                        <input type="text" class="dropdown-search" id="doodle-search" placeholder="Search doodles...">
                        <div class="dropdown-options" id="doodle-options"></div>
                    </div>
                </div>
                <button class="add-doodle-btn" id="add-doodle">Add Doodle</button>
            </div>
            
            <div class="team-display" id="team-display">
            </div>
            
            <div class="controls">
                <button class="control-btn" id="copy-code">Copy Team Code</button>
                <button class="control-btn" id="import-code">Import Team Code</button>
                <button class="control-btn" id="import-text">Import from Text</button>
            </div>
            
            <div class="footer">
                <div class="credits">Created by Bwiffs</div>
                <div class="update-info">Updated: Dungeons</div>
            </div>
        </div>

        <div class="page" id="defensive">
            <div class="header">
                <h1>Defensive Type Calculator</h1>
            </div>

            <div class="save-load-container">
                <button class="save-btn" id="save-defensive">Save Defensive Team</button>
                <button class="load-btn" id="load-defensive">Load Defensive Team</button>
                <button class="load-btn" id="load-from-teambuilder">Load from Teambuilder</button>
            </div>

            <div class="calculator-container" id="defensive-container"></div>
            
            <button class="add-doodle-calc" id="add-defensive">+ Add Doodle</button>

            <div class="team-summary">
                <h2>Team Summary</h2>
                <div class="summary-grid">
                    <div class="summary-box">
                        <div class="summary-title">Team Weaknesses</div>
                        <div id="team-weaknesses" class="result-list">None</div>
                    </div>
                    <div class="summary-box">
                        <div class="summary-title">Team Resistances</div>
                        <div id="team-resistances" class="result-list">None</div>
                    </div>
                    <div class="summary-box">
                        <div class="summary-title">Team Immunities</div>
                        <div id="team-immunities" class="result-list">None</div>
                    </div>
                    <div class="summary-box">
                        <div class="summary-title">No Resistances</div>
                        <div id="team-no-resistances" class="result-list">None</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="page" id="offensive">
            <div class="header">
                <h1>Offensive Type Calculator</h1>
            </div>

            <div class="save-load-container">
                <button class="save-btn" id="save-offensive">Save Offensive Team</button>
                <button class="load-btn" id="load-offensive">Load Offensive Team</button>
                <button class="load-btn" id="load-from-teambuilder-offensive">Load from Teambuilder</button>
            </div>

            <div class="calculator-container" id="offensive-container"></div>
            
            <button class="add-doodle-calc" id="add-offensive">+ Add Doodle</button>

            <div class="team-summary">
                <h2>Team Summary</h2>
                <div class="summary-grid">
                    <div class="summary-box">
                        <div class="summary-title">Team Coverage</div>
                        <div id="offensive-coverage" class="result-list">None</div>
                    </div>
                    <div class="summary-box">
                        <div class="summary-title">Not Effective Against</div>
                        <div id="offensive-not-effective" class="result-list">None</div>
                    </div>
                    <div class="summary-box">
                        <div class="summary-title">Resisted By</div>
                        <div id="offensive-resisted" class="result-list">None</div>
                    </div>
                    <div class="summary-box">
                        <div class="summary-title">Coverage Gaps</div>
                        <div id="offensive-gaps" class="result-list">None</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const typeChart = {
            "basic": {
                "basic": 1, "fire": 1, "water": 1, "plant": 1, "spark": 1, 
                "beast": 1, "air": 1, "insect": 1, "earth": 1, "mind": 1, 
                "melee": 2, "food": 1, "light": 1, "crystal": 1, "metal": 1, 
                "spirit": 0, "ice": 1, "dark": 1, "poison": 1, "mythic": 1
            },
            "fire": {
                "basic": 1, "fire": 0.5, "water": 2, "plant": 0.5, "spark": 1, 
                "beast": 0.5, "air": 1, "insect": 0.5, "earth": 2, "mind": 1, 
                "melee": 1, "food": 0.5, "light": 0.5, "crystal": 1, "metal": 0.5, 
                "spirit": 1, "ice": 2, "dark": 1, "poison": 1, "mythic": 1
            },
            "water": {
                "basic": 1, "fire": 0.5, "water": 0.5, "plant": 2, "spark": 2, 
                "beast": 1, "air": 1, "insect": 1, "earth": 1, "mind": 1, 
                "melee": 1, "food": 1, "light": 1, "crystal": 0.5, "metal": 0.5, 
                "spirit": 1, "ice": 0.5, "dark": 1, "poison": 2, "mythic": 1
            },
            "plant": {
                "basic": 1, "fire": 2, "water": 0.5, "plant": 0.5, "spark": 0.5, 
                "beast": 1, "air": 2, "insect": 2, "earth": 0.5, "mind": 1, 
                "melee": 1, "food": 0.5, "light": 0.5, "crystal": 1, "metal": 1, 
                "spirit": 1, "ice": 2, "dark": 1, "poison": 2, "mythic": 1
            },
            "spark": {
                "basic": 1, "fire": 1, "water": 1, "plant": 1, "spark": 0.5, 
                "beast": 0.5, "air": 0.5, "insect": 1, "earth": 2, "mind": 1, 
                "melee": 1, "food": 1, "light": 1, "crystal": 2, "metal": 0.5, 
                "spirit": 1, "ice": 1, "dark": 1, "poison": 1, "mythic": 1
            },
            "beast": {
                "basic": 1, "fire": 2, "water": 1, "plant": 1, "spark": 2, 
                "beast": 2, "air": 1, "insect": 0.5, "earth": 1, "mind": 2, 
                "melee": 1, "food": 0.5, "light": 1, "crystal": 1, "metal": 1, 
                "spirit": 1, "ice": 1, "dark": 0.5, "poison": 1, "mythic": 1
            },
            "air": {
                "basic": 1, "fire": 1, "water": 1, "plant": 0.5, "spark": 2, 
                "beast": 1, "air": 1, "insect": 0.5, "earth": 0, "mind": 1, 
                "melee": 0.5, "food": 1, "light": 1, "crystal": 1, "metal": 1, 
                "spirit": 1, "ice": 2, "dark": 1, "poison": 2, "mythic": 1
            },
            "insect": {
                "basic": 1, "fire": 2, "water": 1, "plant": 0.5, "spark": 2, 
                "beast": 2, "air": 2, "insect": 1, "earth": 0.5, "mind": 1, 
                "melee": 0.5, "food": 1, "light": 1, "crystal": 1, "metal": 1, 
                "spirit": 1, "ice": 1, "dark": 0.5, "poison": 1, "mythic": 1
            },
            "earth": {
                "basic": 1, "fire": 0.5, "water": 2, "plant": 2, "spark": 0, 
                "beast": 1, "air": 1, "insect": 1, "earth": 1, "mind": 1, 
                "melee": 1, "food": 1, "light": 1, "crystal": 0.5, "metal": 1, 
                "spirit": 1, "ice": 2, "dark": 1, "poison": 0.5, "mythic": 1
            },
            "mind": {
                "basic": 1, "fire": 1, "water": 1, "plant": 1, "spark": 1, 
                "beast": 1, "air": 1, "insect": 2, "earth": 1, "mind": 0.5, 
                "melee": 0.5, "food": 2, "light": 1, "crystal": 1, "metal": 1, 
                "spirit": 2, "ice": 1, "dark": 2, "poison": 1, "mythic": 1
            },
            "melee": {
                "basic": 1, "fire": 1, "water": 1, "plant": 1, "spark": 1, 
                "beast": 0.5, "air": 2, "insect": 0.5, "earth": 1, "mind": 2, 
                "melee": 1, "food": 2, "light": 1, "crystal": 1, "metal": 1, 
                "spirit": 1, "ice": 0.5, "dark": 1, "poison": 1, "mythic": 1
            },
            "food": {
                "basic": 1, "fire": 2, "water": 2, "plant": 1, "spark": 0.5, 
                "beast": 2, "air": 1, "insect": 2, "earth": 1, "mind": 1, 
                "melee": 1, "food": 1, "light": 0.5, "crystal": 1, "metal": 1, 
                "spirit": 1, "ice": 1, "dark": 0.5, "poison": 1, "mythic": 1
            },
            "light": {
                "basic": 1, "fire": 0.5, "water": 1, "plant": 2, "spark": 1, 
                "beast": 1, "air": 1, "insect": 1, "earth": 1, "mind": 1, 
                "melee": 1, "food": 1, "light": 0.5, "crystal": 1, "metal": 1, 
                "spirit": 0, "ice": 1, "dark": 2, "poison": 1, "mythic": 1
            },
            "crystal": {
                "basic": 1, "fire": 0.5, "water": 1, "plant": 1, "spark": 0.5, 
                "beast": 1, "air": 1, "insect": 1, "earth": 2, "mind": 2, 
                "melee": 2, "food": 1, "light": 0.5, "crystal": 1, "metal": 2, 
                "spirit": 0.5, "ice": 1, "dark": 1, "poison": 0, "mythic": 1
            },
            "metal": {
                "basic": 0.5, "fire": 2, "water": 1, "plant": 0.5, "spark": 1, 
                "beast": 0.5, "air": 0.5, "insect": 0.5, "earth": 2, "mind": 0.5, 
                "melee": 2, "food": 1, "light": 1, "crystal": 1, "metal": 0.5, 
                "spirit": 1, "ice": 0.5, "dark": 1, "poison": 0, "mythic": 1
            },
            "spirit": {
                "basic": 0, "fire": 1, "water": 1, "plant": 1, "spark": 1, 
                "beast": 1, "air": 1, "insect": 1, "earth": 1, "mind": 0.5, 
                "melee": 0, "food": 0.5, "light": 2, "crystal": 2, "metal": 1, 
                "spirit": 2, "ice": 1, "dark": 2, "poison": 0.5, "mythic": 1
            },
            "ice": {
                "basic": 1, "fire": 2, "water": 1, "plant": 1, "spark": 1, 
                "beast": 1, "air": 1, "insect": 1, "earth": 1, "mind": 1, 
                "melee": 2, "food": 1, "light": 1, "crystal": 0.5, "metal": 2, 
                "spirit": 1, "ice": 0.5, "dark": 1, "poison": 1, "mythic": 1
            },
            "dark": {
                "basic": 1, "fire": 1, "water": 1, "plant": 1, "spark": 1, 
                "beast": 2, "air": 1, "insect": 2, "earth": 1, "mind": 0, 
                "melee": 1, "food": 1, "light": 2, "crystal": 1, "metal": 1, 
                "spirit": 0.5, "ice": 1, "dark": 0.5, "poison": 1, "mythic": 1
            },
            "poison": {
                "basic": 1, "fire": 1, "water": 0.5, "plant": 1, "spark": 1, 
                "beast": 1, "air": 0.5, "insect": 0.5, "earth": 2, "mind": 2, 
                "melee": 0.5, "food": 1, "light": 1, "crystal": 1, "metal": 1, 
                "spirit": 1, "ice": 1, "dark": 1, "poison": 0.5, "mythic": 1
            },
            "mythic": {
                "basic": 0.5, "fire": 0.5, "water": 0.5, "plant": 0.5, "spark": 0.5, 
                "beast": 0.5, "air": 1, "insect": 1, "earth": 1, "mind": 1, 
                "melee": 1, "food": 1, "light": 2, "crystal": 2, "metal": 1, 
                "spirit": 1, "ice": 1, "dark": 1, "poison": 1, "mythic": 2
            }
        };

        const allTypes = Object.keys(typeChart);
        
        const typeColors = {
            'Mythic': 'var(--mythic-color)',
            'Fire': 'var(--fire-color)',
            'Water': 'var(--water-color)',
            'Plant': 'var(--plant-color)',
            'Spark': 'var(--spark-color)',
            'Beast': 'var(--beast-color)',
            'Air': 'var(--air-color)',
            'Insect': 'var(--insect-color)',
            'Earth': 'var(--earth-color)',
            'Mind': 'var(--mind-color)',
            'Melee': 'var(--melee-color)',
            'Food': 'var(--food-color)',
            'Light': 'var(--light-color)',
            'Crystal': 'var(--crystal-color)',
            'Metal': 'var(--metal-color)',
            'Spirit': 'var(--spirit-color)',
            'Ice': 'var(--ice-color)',
            'Dark': 'var(--dark-color)',
            'Poison': 'var(--poison-color)',
            'Basic': 'var(--basic-color)'
        };

        const typeIcons = {
            'Mythic': 'logos/mythic.webp',
            'Fire': 'logos/fire.webp',
            'Water': 'logos/water.webp',
            'Plant': 'logos/plant.webp',
            'Spark': 'logos/spark.webp',
            'Beast': 'logos/beast.webp',
            'Air': 'logos/air.webp',
            'Insect': 'logos/bug.webp',
            'Earth': 'logos/earth.webp',
            'Mind': 'logos/mind.webp',
            'Melee': 'logos/melee.webp',
            'Food': 'logos/food.webp',
            'Light': 'logos/light.webp',
            'Crystal': 'logos/crystal.webp',
            'Metal': 'logos/metal.webp',
            'Spirit': 'logos/spirit.webp',
            'Ice': 'logos/ice.webp',
            'Dark': 'logos/dark.webp',
            'Poison': 'logos/poison.webp',
            'Basic': 'logos/basic.webp'
        };

                                             const doodles = [
            { name: "Abyssent", image: "https://i.ibb.co/6089VMk2/Abyssent-1.webp", type: "Water/Light" },
            { name: "Aerystal", image: "https://i.ibb.co/9KdDtN1/Aerystal-1.webp", type: "Crystal/Air" },
            { name: "Aliantion", image: "https://i.ibb.co/fGVtt9VC/Aliantion-1.webp", type: "Insect/Mind" },
            { name: "Aluminja", image: "https://i.ibb.co/tpxnFrs0/Aluminja-1.webp", type: "Metal/Melee" },
            { name: "Antenaflight", image: "https://i.ibb.co/chg5DDHT/Antenaflight-1.webp", type: "Insect/Air" },
            { name: "Anubeetle", image: "https://i.ibb.co/zHZWtGLG/Anubeetle-1.webp", type: "Insect/Earth" },
            { name: "Arachniak", image: "https://i.ibb.co/rGzxdc10/Arachniak-1.webp", type: "Spirit/Insect" },
            { name: "Archopos", image: "https://i.ibb.co/cKvQgKqZ/Archopos-1.webp", type: "Spirit" },
            { name: "Archopos-A", image: "https://i.ibb.co/tTZYP6LB/A-Archopos-1.webp", type: "Spirit/Metal" },
            { name: "Armaratus", image: "https://i.ibb.co/jvMyhxRH/Armaratus-Unveiled-1.webp", type: "Spirit/Crystal" },
            { name: "Arthopex", image: "https://i.ibb.co/spyF5Yty/Arthopex-1.webp", type: "Beast/Insect" },
            { name: "Artifixie-Base", image: "https://i.ibb.co/NdjXHNsN/Artifixie-1.webp", type: "Ice/Mind" },
            { name: "Artifixie-Mech", image: "https://i.ibb.co/wNYbXdLb/Artifixie-MEKA-1.webp", type: "Ice/Metal" },
            { name: "Banautalis", image: "https://i.ibb.co/ZpfvDz69/Banautilus-1.webp", type: "Plant/Food" },
            { name: "Bionotic", image: "https://i.ibb.co/rKwnMmQs/Bionotic-1.webp", type: "Water/Mind" },
            { name: "Bionotic-A", image: "https://i.ibb.co/RdsYPBh/A-Bionotic-1.webp", type: "Water/Mind" },
            { name: "Bronzoch", image: "https://i.ibb.co/7ty7w22C/Bronzoch-1.webp", type: "Fire/Metal" },
            { name: "Bubbull", image: "https://i.ibb.co/pBj6DYFJ/Bubbull-1.webp", type: "Water/Earth" },
            { name: "Bubbull-A", image: "https://i.ibb.co/5W1hP8y6/A-Bubbull-1.webp", type: "Water/Earth" },
            { name: "Bungo", image: "https://i.ibb.co/4RbPds64/Bungo-Family-1.webp", type: "Poison" },
            { name: "Bunswirl", image: "https://i.ibb.co/r2r7LLxH/Bunswirl-1.webp", type: "Food/Basic" },
            { name: "Cacmeow", image: "https://i.ibb.co/Cs0PgZ1Q/Cacmeow-1.webp", type: "Plant/Earth" },
            { name: "Cacmeow-A", image: "https://i.ibb.co/hJnBK6jj/A-Cacmeow-1.webp", type: "Plant/Earth" },
            { name: "Calamander", image: "https://i.ibb.co/N6SrKydb/Calamander-1.webp", type: "Food" },
            { name: "Calamander-A", image: "https://i.ibb.co/Xf2k8WL4/A-Calamander-1.webp", type: "Food/Beast" },
            { name: "Candeigon", image: "https://i.ibb.co/0jcQhbJT/Candeigon-1.webp", type: "Food/Mind" },
            { name: "Carnivower", image: "https://i.ibb.co/PZ4sk1sB/Carnivower-1.webp", type: "Plant/Beast" },
            { name: "Celestian", image: "https://i.ibb.co/LdxVfJN8/Celestian-1.webp", type: "Mind/Metal" },
            { name: "Cerebopod", image: "https://i.ibb.co/fYf7nDP9/Cerebopod-1.webp", type: "Mind/Poison" },
            { name: "Cerebopod-A", image: "https://i.ibb.co/RGJtFjLZ/A-Cerebopod-1.webp", type: "Mind/Poison" },
            { name: "Cherugard", image: "https://i.ibb.co/dJKrrF91/Cherugard-1.webp", type: "Light/Air" },
            { name: "Chimestive", image: "https://i.ibb.co/BH4tZFRj/Chimestive-1.webp", type: "Plant/Air" },
            { name: "Clangutang", image: "https://i.ibb.co/6JgmLsNT/Clangutang-1.webp", type: "Earth/Metal" },
            { name: "Corrolizard", image: "https://i.ibb.co/HDYqQHJX/Corrolizard-1.webp", type: "Poison" },
            { name: "Corrolizard-A", image: "https://i.ibb.co/7tgnPM4B/A-Corrolizard-1.webp", type: "Poison/Spirit" },
            { name: "Cragildae", image: "https://i.ibb.co/KT2Q7KS/Cragildae-1.webp", type: "Earth/Melee" },
            { name: "Cragildae-A", image: "https://i.ibb.co/zWTVy9dS/A-Cragildae-1.webp", type: "Earth/Melee" },
            { name: "Cryotera", image: "https://i.ibb.co/k2ZdKtrW/Cryotera-1.webp", type: "Ice/Air" },
            { name: "Cryotera-A", image: "https://i.ibb.co/xKQy61rC/A-Cryotera-1.webp", type: "Ice/Dark" },
            { name: "Ctholos", image: "https://i.ibb.co/chVmY7PW/Ctholos-1.webp", type: "Water/Dark" },
            { name: "Daeferno", image: "https://i.ibb.co/675zBZZW/Daeferno-1.webp", type: "Fire/Spirit" },
            { name: "Daeferno-A", image: "https://i.ibb.co/672z1BHp/A-Daeferno-1.webp", type: "Fire/Spirit" },
            { name: "Dameseal", image: "https://i.ibb.co/4ZkjjRDS/Dameseal-1.webp", type: "Water/Basic" },
            { name: "Desdog", image: "https://i.ibb.co/0RDzVQky/Desdog-1.webp", type: "Dark/Basic" },
            { name: "Djinneko", image: "https://i.ibb.co/YBpZJJSB/Djinneko-1.webp", type: "Mind/Spirit" },
            { name: "Drakothread", image: "https://i.ibb.co/1G3mhY2w/Drakothread-1.webp", type: "Air/Basic" },
            { name: "Elefortune", image: "https://i.ibb.co/7dmVRhbh/Elefortune-1.webp", type: "Mind/Light" },
            { name: "Emperoflame", image: "https://i.ibb.co/pVV1mRj/Leoperor-1.webp", type: "Fire" },
            { name: "Endovul", image: "https://i.ibb.co/5g9shVvN/Endovul-1.webp", type: "Crystal/Ice" },
            { name: "Exoskelis", image: "https://i.ibb.co/TMz19D9q/Exoskelis-1.webp", type: "Insect/Dark" },
            { name: "Exovul", image: "https://i.ibb.co/84fkbHxs/Exovul-1.webp", type: "Crystal/Fire" },
            { name: "Fabulupin", image: "https://i.ibb.co/pjzhKxF5/Fabulupin-1.webp", type: "Plant/Grass" },
            { name: "Fancyoon", image: "https://i.ibb.co/gbCzN5LB/Fancyoon-1.webp", type: "Poison/Basic" },
            { name: "Feracoalt", image: "https://i.ibb.co/PsSsCrC7/Feracoatl-1.webp", type: "Plant/Beast" },
            { name: "Finwick", image: "https://i.ibb.co/bRz7S96Y/Finwick-1.webp", type: "Water" },
            { name: "Flong", image: "https://i.ibb.co/LbN1vGV/Flong-1.webp", type: "Beast" },
            { name: "Fluppy", image: "https://i.ibb.co/LX4zCZHm/Fluppy-1.webp", type: "Light/Plant" },
            { name: "Frigale", image: "https://i.ibb.co/8Dqqxd0K/Frigale-1.webp", type: "Air/Basic" },
            { name: "Fruitoad", image: "https://i.ibb.co/9mn2YbsT/Fruitoad-1.webp", type: "Food/Water" },
            { name: "Fummasu", image: "https://i.ibb.co/KzpGzMbq/Fummasu-1.webp", type: "Mind/Air" },
            { name: "Garghoul", image: "https://i.ibb.co/NnNnFjzh/Garghoul-1.webp", type: "Spirit/Air" },
            { name: "Gigarlic", image: "https://i.ibb.co/xqVBZFJQ/Gigarlic-1.webp", type: "Fire/Food" },
            { name: "Girasera", image: "https://i.ibb.co/hxBQKwwf/Girasera-1.webp", type: "Plant/Poison" },
            { name: "Glacigash", image: "https://i.ibb.co/TdfFpHZ/Glacigash-1.webp", type: "Insect/Ice" },
            { name: "Glubbie", image: "https://i.ibb.co/dJbCHMZY/Glubbie-1.webp", type: "Poison/Spirit" },
            { name: "Gobblegoo", image: "https://i.ibb.co/Q7NhSXRX/Gobblegoo-1.webp", type: "Plant/Poison" },
            { name: "Goliage", image: "https://i.ibb.co/q3Hdx1zM/Goliage-1.webp", type: "Plant/Earth" },
            { name: "Gomutt", image: "https://i.ibb.co/GLtGk4V/Gomutt-1.webp", type: "Water/Beast" },
            { name: "Gourmesal", image: "https://i.ibb.co/mrZSmCXQ/Gourmesal-1.webp", type: "Food/Crystal" },
            { name: "Gowatt", image: "https://i.ibb.co/tw5MF1Gf/Gowatt-1.webp", type: "Spark" },
            { name: "Grimantle", image: "https://i.ibb.co/vvxWTdNr/Grimantle-Cloaked-1.webp", type: "Dark/Poison" },
            { name: "Grimantle-Air", image: "https://i.ibb.co/nN78jvh5/Grimantle-Uncloaked-1.webp", type: "Dark/Air" },
            { name: "Groato", image: "https://i.ibb.co/JRMDMxdp/Groato-1.webp", type: "Basic" },
            { name: "Groato-A", image: "https://i.ibb.co/216TTLtC/A-Groato-1.webp", type: "Basic/Water" },
            { name: "Grufflin", image: "https://i.ibb.co/8g9szqn6/Grufflin-1.webp", type: "Food/Air" },
            { name: "Grufflin-A", image: "https://i.ibb.co/DfC8vzkz/A-Grufflin-1.webp", type: "Food/Air" },
            { name: "Gyornaw", image: "https://i.ibb.co/KpMV9t2F/Gyornaw-1.webp", type: "Water/Beast" },
            { name: "Hahayena", image: "https://i.ibb.co/8gCVYwt8/Hahayena-1.webp", type: "Spark/Crystal" },
            { name: "Hangryphus", image: "https://i.ibb.co/fGvjtM8b/Hangryphus-1.webp", type: "Food/Melee" },
            { name: "Hattrix", image: "https://i.ibb.co/Wv9q46v7/Hattrix-1.webp", type: "Mind/Dark" },
            { name: "Hattrix-A", image: "https://i.ibb.co/4gDtyB6s/A-Hattrix-1.webp", type: "Mind/Dark" },
            { name: "Henchum", image: "https://i.ibb.co/TnZxsTb/Henchum-1.webp", type: "Melee/Dark" },
            { name: "Hollihare", image: "https://i.ibb.co/Z67cYDpK/Hollihare-1.webp", type: "Plant/Ice" },
            { name: "Horbeast", image: "https://i.ibb.co/b5xXLMkJ/Horbeast-1.webp", type: "Dark/Beast" },
            { name: "Humbiscus", image: "https://i.ibb.co/S7ntyndk/Humbiscus-1.webp", type: "Plant/Air" },
            { name: "Hypnotl", image: "https://i.ibb.co/tPc6RBR2/Hypnotl-1.webp", type: "Mind/Plant" },
            { name: "Hypnotl-A", image: "https://i.ibb.co/KctgdH1J/A-Hypnotl-1.webp", type: "Mind/Plant" },
            { name: "Incinelisk", image: "https://i.ibb.co/TqHKHDWd/Incinelisk-1.webp", type: "Fire/Dark" },
            { name: "Infurnius", image: "https://i.ibb.co/5x4hkzmm/Infurnius-1.webp", type: "Fire/Light" },
            { name: "Irikil", image: "https://i.ibb.co/Z4RBv70/Irikil-1.webp", type: "Dark" },
            { name: "Jaelect", image: "https://i.ibb.co/vxwg4vMw/Jaelect-1.webp", type: "Crystal" },
            { name: "Jelluminous", image: "https://i.ibb.co/qLt9t83c/Jelluminous-1.webp", type: "Light/Spark" },
            { name: "Jellupy", image: "https://i.ibb.co/TxM2qcrx/Jellupy-1.webp", type: "Food/Metal" },
            { name: "Jestwirl", image: "https://i.ibb.co/kgnrhxVX/Jestwirl-1.webp", type: "Mind/Basic" },
            { name: "Jinglark", image: "https://i.ibb.co/VWMBVJmp/Jinglark-1.webp", type: "Plant/Air" },
            { name: "Jinglark-A", image: "https://i.ibb.co/LXV998HS/A-Jinglark-1.webp", type: "Plant/Air" },
            { name: "Junipyro", image: "https://i.ibb.co/xqp2SBWh/Junipyro-1.webp", type: "Fire/Plant" },
            { name: "Kelpimer", image: "https://i.ibb.co/Y4W1Mjk6/Kelpimer-1.webp", type: "Water/Spirit" },
            { name: "Kibara", image: "https://i.ibb.co/fYt5R6QB/Kibara-1.webp", type: "Ice/Crystal" },
            { name: "Kidere", image: "https://i.ibb.co/Z6vvwyHj/Kidere-1.webp", type: "Ice/Light" },
            { name: "Klydaskunk", image: "https://i.ibb.co/Ld062NV5/Klydaskunk-1.webp", type: "Poison/Light" },
            { name: "Koriyu", image: "https://i.ibb.co/wNBLqfxt/Koriyu-1.webp", type: "Ice/Dark" },
            { name: "Kreindus", image: "https://i.ibb.co/vvv6wcbL/Kreindus-1.webp", type: "Ice/Dark" },
            { name: "Lacergen-Base", image: "https://i.ibb.co/Mxs3gYqt/image.png", type: "Basic/Metal" },
            { name: "Lacergen-Earth", image: "https://i.ibb.co/rKT4Rmky/Lacergen-Earth-1.webp", type: "Earth/Metal" },
            { name: "Lacergen-Fire", image: "https://i.ibb.co/5h8D1FSP/Lacergen-Fire-1.webp", type: "Fire/Metal" },
            { name: "Lacergen-Ice", image: "https://i.ibb.co/Q7w3FzgN/Lacergen-Ice-1.webp", type: "Ice/Metal" },
            { name: "Lacergen-Spark", image: "https://i.ibb.co/w3HBhnZ/Lacergen-Spark-1.webp", type: "Spark/Metal" },
            { name: "Leazar", image: "https://i.ibb.co/nNhhcgdG/Leazar-1.webp", type: "Plant" },
            { name: "Libelagua", image: "https://i.ibb.co/zWft88KD/Libelagua-1.webp", type: "Water/Insect" },
            { name: "Libelagua-A", image: "https://i.ibb.co/Rpx9gcMC/A-Libelagua-1.webp", type: "Water/Insect" },
            { name: "Lilivian", image: "https://i.ibb.co/fV4Hr49K/Lilvian-1.webp", type: "Plant/Mind" },
            { name: "Louis", image: "https://i.ibb.co/wZzzG9C4/Louis-1.webp", type: "Basic" },
            { name: "Lumiline", image: "https://i.ibb.co/HT1X7rYZ/Lumiline-1.webp", type: "Light/Crystal" },
            { name: "Lumiline-A", image: "https://i.ibb.co/LXFXwBKP/A-Lumiline-1.webp", type: "Light/Crystal" },
            { name: "Lurkilid", image: "https://i.ibb.co/V0rRPwk3/Lurkelid-1.webp", type: "Water/Dark" },
            { name: "Maelzuri", image: "https://i.ibb.co/8LdJTbdj/Maelzuri-1.webp", type: "Water/Crystal" },
            { name: "Magmotode", image: "https://i.ibb.co/ZzD7JKvq/Magmotode-1.webp", type: "Fire/Earth" },
            { name: "Mallemole", image: "https://i.ibb.co/hxSVBDbv/Mallemole-1.webp", type: "Beast/Basic" },
            { name: "Malotrick", image: "https://i.ibb.co/mr48hByp/Malotrick-1.webp", type: "Dark/Mind" },
            { name: "Malotrick-A", image: "https://i.ibb.co/kf25XV8/A-Malotrick-1.webp", type: "Dark/Mind" },
            { name: "Mammolten", image: "https://i.ibb.co/PGHnt9Qw/Mammolten-Erupt-1.webp", type: "Ice/Fire" },
            { name: "Mantiscald", image: "https://i.ibb.co/xSC4Lrd3/Mantiscald-1.webp", type: "Water/Fire" },
            { name: "Marigrimm", image: "https://i.ibb.co/KxXS9sCN/Marigrimm-1.webp", type: "Spirit" },
            { name: "Maskomedy", image: "https://i.ibb.co/4RD9GfDc/Maskomedy-1.webp", type: "Light/Spirit" },
            { name: "Maskomedy-A", image: "https://i.ibb.co/j9MjvpjW/A-Maskomedy-2.webp", type: "Light/Dark" },
            { name: "Mawthra", image: "https://i.ibb.co/gFrVHRGP/Mawthra-1.webp", type: "Poison/Insect" },
            { name: "Mawthra-A", image: "https://i.ibb.co/tThbsss0/A-Mawthra-1.webp", type: "Poison/Metal" },
            { name: "Medikrow", image: "https://i.ibb.co/d0Fj8BLx/Medikrow-1.webp", type: "Dark/Poison" },
            { name: "Megortles", image: "https://i.ibb.co/7Nr2NJSs/Megortles-1.webp", type: "Plant" },
            { name: "Meiolicant", image: "https://i.ibb.co/s97prLxM/Meiolicant-1.webp", type: "Poison" },
            { name: "Meltimaw", image: "https://i.ibb.co/gbCfYmNj/Meltimaw-1.webp", type: "Fire/Food" },
            { name: "Mercenous", image: "https://i.ibb.co/d0TY4gkB/Mercenous-1.webp", type: "Water/Light" },
            { name: "Mielursa", image: "https://i.ibb.co/wNsh6hbc/Mielursa-1.webp", type: "Food/Insect" },
            { name: "Metalytra", image: "https://i.ibb.co/DH9PxW63/Metalytra-1.webp", type: "Insect/Metal" },
            { name: "Mold", image: "https://i.ibb.co/1fFnv8zb/Mold-1.webp", type: "Water/Poison" },
            { name: "Monolugg", image: "https://i.ibb.co/5h5kK6bC/Monolugg-1.webp", type: "Earth" },
            { name: "Montor", image: "https://i.ibb.co/mVS8Z3wV/Montor-1.webp", type: "Spark/Metal" },
            { name: "Morphiu-C", image: "https://i.ibb.co/23B07SgR/Morphiu-C-1.webp", type: "Mind/Water" },
            { name: "Morphiu-G", image: "https://i.ibb.co/21XvcBCR/Morphiu-G-1.webp", type: "Mind/Air" },
            { name: "Morphiu-L", image: "https://i.ibb.co/cc0Hv4BY/Morphiu-L-1.webp", type: "Mind/Fire" },
            { name: "Morphiu-O", image: "https://i.ibb.co/G6gTChC/Morphiu-O-1.webp", type: "Mind/Basic" },
            { name: "Morphiu-T", image: "https://i.ibb.co/PqsS6dD/Morphiu-T-1.webp", type: "Mind/Earth" },
            { name: "Moss", image: "https://i.ibb.co/35rdfnLP/Moss-1.webp", type: "Water/Plant" },
            { name: "Mourveil", image: "https://i.ibb.co/0jZfT5hV/Mourveil-1.webp", type: "Plant/Dark" },
            { name: "Mourveil-A", image: "https://i.ibb.co/kgVyyFBf/A-Mourveil-1.webp", type: "Plant/Dark" },
            { name: "Moyai", image: "https://i.ibb.co/pF0zg6G/Moyai-1.webp", type: "Earth" },
            { name: "Mystifaux", image: "https://i.ibb.co/mVTJBJZS/Mystifaux-1.webp", type: "Dark/Mind" },
            { name: "Nepteros", image: "https://i.ibb.co/4w0V7yw4/Nepteros-1.webp", type: "Water/Dark" },
            { name: "Nimbell", image: "https://i.ibb.co/jZWDLDHJ/Nimbell-1.webp", type: "Light" },
            { name: "Noctoryx", image: "https://i.ibb.co/yBsWFXhg/Noctoryx-1.webp", type: "Dark/Crystal" },
            { name: "Noxvul", image: "https://i.ibb.co/4ZVgKq1W/Noxvul-1.webp", type: "Poison/Crystal" },
            { name: "Nyanto", image: "https://i.ibb.co/spmdZfFR/Nyanto-1.webp", type: "Insect/Basic" },
            { name: "Nyanto-A", image: "https://i.ibb.co/J0CPgXL/A-Nyanto-1.webp", type: "Insect/Air" },
            { name: "Octonut", image: "https://i.ibb.co/Kxmk598X/Octonut-1.webp", type: "Water" },
            { name: "Ostigon", image: "https://i.ibb.co/s9ZrC8bN/Ostigon-1.webp", type: "Beast/Poison" },
            { name: "Ostigon-A", image: "https://i.ibb.co/HfdQXwfy/A-Ostigon-1.webp", type: "Dark/Poison" },
            { name: "Owol", image: "https://i.ibb.co/gLMHWgMR/Owol-1.webp", type: "Air" },
            { name: "Partybug", image: "https://i.ibb.co/35B2tdn3/Partybug-1.webp", type: "Insect/Mind" },
            { name: "Partybug-A", image: "https://i.ibb.co/twhWrjW9/A-Partybug-1.webp", type: "Beast/Mind" },
            { name: "Polargeist", image: "https://i.ibb.co/0ptcTmV7/Polargeist-1.webp", type: "Ice/Spirit" },
            { name: "Pompaboar", image: "https://i.ibb.co/Y48NhZp0/Pompaboar-1.webp", type: "Basic" },
            { name: "Potterfiend", image: "https://i.ibb.co/ymBB33mB/Potterfiend-1.webp", type: "Earth/Dark" },
            { name: "Prickles", image: "https://i.ibb.co/tPwVLrjm/Prickles-1.webp", type: "Plant/Melee" },
            { name: "Qilintel", image: "https://i.ibb.co/2Yq0Wxpq/Qilintel-1.webp", type: "Light/Metal" },
            { name: "Reliconis", image: "https://i.ibb.co/d41nS4Kw/Reliconis-1.webp", type: "Spirit/Beast" },
            { name: "Rhinostone", image: "https://i.ibb.co/SDDvcKkb/Rhinostone", type: "Earth/Crystal" },
            { name: "Ribbotl", image: "https://i.ibb.co/ksc17JXq/Ribbotl-1.webp", type: "Mind" },
            { name: "Riptorvent", image: "https://i.ibb.co/PZ9YbcP6/Riptorvent-1.webp", type: "Spark/Beast" },
            { name: "Roadterra", image: "https://i.ibb.co/d0kjLRMQ/Roadterra-1.webp", type: "Earth/Air" },
            { name: "Runewt", image: "https://i.ibb.co/wF702S6r/Runewt-1.webp", type: "Earth/Mind" },
            { name: "Scarfox", image: "https://i.ibb.co/WWV8Rkbc/Scarfox-1.webp", type: "Ice" },
            { name: "Scheemeesh", image: "https://i.ibb.co/vCRtgG4N/Schemeesh-1.webp", type: "Water/Basic" },
            { name: "Scorsurge", image: "https://i.ibb.co/dsMvnjxh/Scorsurge-1.webp", type: "Spark/Poison" },
            { name: "Seacrion", image: "https://i.ibb.co/tTy8MDX3/Seacrion-1.webp", type: "Water/Beast" },
            { name: "Seamknight", image: "https://i.ibb.co/wZXd9132/Seamknight-Guard-1.webp", type: "Metal/Spirit" },
            { name: "Seamstress", image: "https://i.ibb.co/DHkMrS4L/Seamstress-Strike-1.webp", type: "Metal/Spirit" },
            { name: "Serpentsheen", image: "https://i.ibb.co/RGJBrdL1/Serpentsheen-1.webp", type: "Metal/Crystal" },
            { name: "Serrafin", image: "https://i.ibb.co/Qv2zsB5s/Serrafin-1.webp", type: "Metal/Water" },
            { name: "Skadean", image: "https://i.ibb.co/gFjC44VZ/Skadean-1.webp", type: "Ice/Water" },
            { name: "Skadean-A", image: "https://i.ibb.co/Kj5g4BDz/A-Skadean-1.webp", type: "Ice/Water" },
            { name: "Skervidae", image: "https://i.ibb.co/20HnYgfk/Skervidae-1.webp", type: "Spark/Fire" },
            { name: "Skorpiruli", image: "https://i.ibb.co/xS5Dnv2P/Skorpirul-1.webp", type: "Food/Poison" },
            { name: "Snorolla", image: "https://i.ibb.co/xSzcJjNL/Snorolla-1.webp", type: "Ice/Basic" },
            { name: "Snowclowne", image: "https://i.ibb.co/KcM8YpGL/Snowclone-1.webp", type: "Food/Ice" },
            { name: "Somberock", image: "https://i.ibb.co/Ly7B8wX/Somberock-1.webp", type: "Food/Dark" },
            { name: "Somberock-A", image: "https://i.ibb.co/6RVTdrLp/A-Somberock-1.webp", type: "Food/Light" },
            { name: "Spectatik", image: "https://i.ibb.co/svdj84TJ/Spectatik-1.webp", type: "Crystal/Insect" },
            { name: "Spectatik-a", image: "https://i.ibb.co/Y7MLPzMv/A-Spectatik-1.webp", type: "Crystal/Insect" },
            { name: "Springling", image: "https://i.ibb.co/zWHPBzc0/Springling-1.webp", type: "Plant/Basic" },
            { name: "Spunny", image: "https://i.ibb.co/393wQy0f/Spunny-1.webp", type: "Basic/Spirit" },
            { name: "Squonk", image: "https://i.ibb.co/rR7PVkQy/Squonk-1.webp", type: "Spirit/Plant" },
            { name: "Staligant-F", image: "https://i.ibb.co/zV7c8QDP/Staligant-F-1.webp", type: "Crystal/Mind" },
            { name: "Staligant-M", image: "https://i.ibb.co/kV5Mhccw/Staligant-1.webp", type: "Crystal/Mind" },
            { name: "Staligant-A", image: "https://i.ibb.co/Qxj5Gh3/A-Staligant-1.webp", type: "Crystal/Mind" },
            { name: "Sukikogami", image: "https://i.ibb.co/1GWbyNBj/Sukikogami-1.webp", type: "Dark/Air" },
            { name: "Suomous", image: "https://i.ibb.co/ddzbXt6/Suomous-1.webp", type: "Melee" },
            { name: "Suomous-A", image: "https://i.ibb.co/DfSmjHg2/A-Suomous-1.webp", type: "Melee" },
            { name: "Sursablit", image: "https://i.ibb.co/d0xP7yGJ/Sursablit-1.webp", type: "Earth/Spark" },
            { name: "Swoptar", image: "https://i.ibb.co/zhtHc4jn/Swoptar-1.webp", type: "Metal/Beast" },
            { name: "Taryonix", image: "https://i.ibb.co/nNSHph4p/Taryonix-1.webp", type: "Beast/Earth" },
            { name: "Tasmarauder", image: "https://i.ibb.co/sp8RcScC/Tasmarauder-1.webp", type: "Melee/Beast" },
            { name: "Terruma", image: "https://i.ibb.co/fGk0f43H/Terruma-1.webp", type: "Earth/Basic" },
            { name: "Theaterror", image: "https://i.ibb.co/mrY9NzBV/Theaterror-1.webp", type: "Dark/Spirit" },
            { name: "Theaterror-A", image: "https://i.ibb.co/XrGnt0N0/A-Theaterror-1.webp", type: "Dark/Light" },
            { name: "Thornet", image: "https://i.ibb.co/TDzcVMzg/Thornet-1.webp", type: "Plant/Insect" },
            { name: "Thornet-A", image: "https://i.ibb.co/1Y6HtYMX/A-Thornet-1.webp", type: "Plant/Metal" },
            { name: "Toxisui", image: "https://i.ibb.co/39MVcP9Z/Toxisui-1.webp", type: "Water/Poison" },
            { name: "Tsumo", image: "https://i.ibb.co/JWW2cL87/Tsumo-1.webp", type: "Melee/Fire" },
            { name: "Tufflaze", image: "https://i.ibb.co/Zpkg0g7f/Tufflaze-1.webp", type: "Fire/Beast" },
            { name: "Tufflaze-A", image: "https://i.ibb.co/0VjQ28H1/A-Tufflaze-1.webp", type: "Fire/Beast" },
            { name: "Tulenna", image: "https://i.ibb.co/8LJxfypL/Tulenna-1.webp", type: "Plant" },
            { name: "Tulenna-A", image: "https://i.ibb.co/Xk2STDXs/A-Tulenna-1.webp", type: "Plant/Poison" },
            { name: "Umaisho", image: "https://i.ibb.co/zhVB1Fj8/Umaisho-1.webp", type: "Food" },
            { name: "Umaisho-A", image: "https://i.ibb.co/60C56kcL/A-Umaisho-1.webp", type: "Food" },
            { name: "Velodo", image: "https://i.ibb.co/6J87ZSW7/Velodo-1.webp", type: "Beast/Air" },
            { name: "Vermorph", image: "https://i.ibb.co/PG72sXXd/Vermorph-1.webp", type: "Spark/Insect" },
            { name: "Vermorph-A", image: "https://i.ibb.co/QvMzMzjy/A-Vermorph-1.webp", type: "Spark/Insect" },
            { name: "Vigimante", image: "https://i.ibb.co/G4kr2d83/Vigimant-1.webp", type: "Water/Melee" },
            { name: "Vigimante-A", image: "https://i.ibb.co/1Gj2nSNy/A-Vigimant-1.webp", type: "Water/Melee" },
            { name: "Voltatoo", image: "https://i.ibb.co/TM549RHq/Voltatoo-1.webp", type: "Spark/Air" },
            { name: "Voltenchant", image: "https://i.ibb.co/WWVCThdy/Voltenchant-1.webp", type: "Spark" },
            { name: "Voltenchant-A", image: "https://i.ibb.co/5XpHsNS2/A-Voltenchant-1.webp", type: "Spark/Water" },
            { name: "Vuliable", image: "https://i.ibb.co/d05SQ4HX/Vuliable-1.webp", type: "Crystal/Basic" },
            { name: "Werewool", image: "https://i.ibb.co/7tJwsrxH/Werewool-1.webp", type: "Beast/Basic" },
            { name: "Wolfreeze", image: "https://i.ibb.co/HDY1VCdg/Wolfreeze-1.webp", type: "Ice/Beast" },
            { name: "Wizvil", image: "https://i.ibb.co/Ps1fPMXL/Wizvil-1.webp", type: "Insect/Plant" },
            { name: "Wyvernal", image: "https://i.ibb.co/VWgxPsCR/Wyvernal-1.webp", type: "Fire/Air" },
            { name: "Zapoeira", image: "https://i.ibb.co/pjjBsLmj/Zapoeira-1.webp", type: "Spark/Melee" },
            { name: "Zerzura", image: "https://i.ibb.co/x8YTpzGZ/Zerzura-1.webp", type: "Water/Air" },
            { name: "Caramellow", image: "https://i.ibb.co/mVqxRJkP/Caramellow-1.webp", type: "Food/Beast" },
            { name: "Boblop", image: "https://i.ibb.co/gbZBZMpm/Boblop-1.webp", type: "Fire/Basic" },
            { name: "Hazination", image: "https://i.ibb.co/Pv1gvf4p/Hazination-1-1.webp", type: "Poison/Metal" },
            { name: "Taxideer", image: "https://i.ibb.co/bggNpkVc/Taxideer-1.webp", type: "Spirit/Basic" },
            { name: "Daffodally", image: "https://i.ibb.co/zWvz7h57/Daffodally-1.webp", type: "Plant/Basic" },
            { name: "Incandesect", image: "https://i.ibb.co/fGkKjspV/Incandesect-1.webp", type: "Light/Insect" },
            { name: "Ignisect", image: "https://i.ibb.co/rfF0Tphb/Ignisect-1.webp", type: "Fire/Insect" },
            { name: "Breezshy", image: "https://i.ibb.co/vx62848L/2025-04-06-0wn-Kleki-2.png", type: "Plant/Air" },
            { name: "Majestegg", image: "https://i.ibb.co/bjpQ6FWj/Majestegg1.png", type: "Food/Metal" },
            { name: "Omeletrot", image: "https://i.ibb.co/W4BZbzh1/Hornse-no-egg1.png", type: "Melee/Food" },
            { name: "Majestegg-Steed", image: "https://i.ibb.co/tMY3zNtc/Hornse1.png", type: "Melee/Food" },
            { name: "Emoticat", image: "https://i.ibb.co/vxRkzQ23/Emoticat-1.webp", type: "Basic" },
            { name: "Onirijyn", image: "https://i.ibb.co/wZdryY61/Onirijyn1.webp", type: "Spark/Beast" },
            { name: "Clavalier", image: "https://i.ibb.co/wrFGzd8m/Latest.png", type: "Water/Metal" },
            { name: "Snowclowne-A", image: "https://i.ibb.co/v60TZCsS/SPOILER-theclowne.png", type: "Ice/Food" },
            { name: "Osman-shi", image: "https://i.ibb.co/JWc6HX4J/Osman-shi-1.webp", type: "Food/Spirit" },
            { name: "Stagine", image: "https://i.ibb.co/9HygQwYv/Stagine-1.webp", type: "Plant/Metal" },
            { name: "Aurevalis", image: "https://i.ibb.co/Qv1sDy8k/Aurevalis-1.webp", type: "Light/Crystal" },
            { name: "Scarrion", image: "https://i.ibb.co/rGq2yNJw/Scarrion-1.webp", type: "Spirit/Poison" },
            { name: "Jellupy-A", image: "https://i.ibb.co/m53ZNDRZ/Untitled324-20250629115504.png", type: "Food/Metal" },
            { name: "Fancyoon-A", image: "https://i.ibb.co/8LYwtZ0Z/Raccounraccoun-1.png", type: "Poison/Basic" },
            { name: "Arcwatt", image: "https://i.ibb.co/PvxkXktZ/Arcwatt-1.webp", type: "Spark/Ice" },
            { name: "Lepidhonk", image: "https://i.ibb.co/kgsTxvx1/Image.png", type: "Insect/Basic" },
            { name: "Sauschund", image: "https://i.ibb.co/prsSQ3Vj/Image.png", type: "Food" },
            { name: "Lobsugar", image: "https://i.ibb.co/tPvftWVW/Lobsugar-1.webp", type: "Food/Mind" },
            { name: "Kaboomaroo", image: "https://i.ibb.co/bMnSztjX/Kaboomaroo-M-1.webp", type: "Light/Melee" },
            { name: "Maskusi", image: "https://i.ibb.co/jZxNT71M/Maskusi-1.webp", type: "Mind/Air" },
            { name: "Tiricket", image: "https://i.ibb.co/twrFVxrC/Tiricket11.png", type: "Food/Insect" },
            { name: "Applicious", image: "https://i.ibb.co/MkB2QYKw/Applicious1.png", type: "Food/Plant" },
            { name: "Snoaster", image: "https://i.ibb.co/zT97M75Z/Snoaster1.png", type: "Metal/Basic" },
            { name: "Tigrousel", image: "https://i.ibb.co/LXwN3vj1/Tigrousel1.png", type: "Mind/Metal" },
            { name: "Mantishrew", image: "https://i.ibb.co/tT8XF5GD/Mantishrew-1.webp", type: "Insect" },
            { name: "Yorus", image: "https://i.ibb.co/ynXRQvn4/Yorus-1.webp", type: "Beast" },
            { name: "Uwursa", image: "https://i.ibb.co/4ggVBSSW/Uwursa-1.webp", type: "Metal/Basic" },
            { name: "Zeepringo", image: "https://i.ibb.co/PzZBk3d8/Zeepringo-1.png", type: "Mind/Melee" },
            { name: "Volcanaur", image: "https://i.ibb.co/8L2XdHLK/Volcanaur-1.png", type: "Fire" },
            { name: "Trithorn", image: "https://i.ibb.co/Z1HQJv7x/Trithorn-1.png", type: "Plant" },
            { name: "Velocivult", image: "https://i.ibb.co/B50hcsBz/Velocivult-1.png", type: "Spark" },
            { name: "Terraphim", image: "https://i.ibb.co/Fb425XfX/Terraphim-1.png", type: "Light/Air" },
            { name: "Sigilune", image: "https://i.ibb.co/rRsTN5JF/Sigilune-1.png", type: "Spirit/Metal" },
            { name: "Shroudal", image: "https://i.ibb.co/bMPLBgF2/Shroudal-1.png", type: "Plant/Mythic" },
            { name: "Salaferno", image: "https://i.ibb.co/MkV1dQVG/Salaferno-1.png", type: "Fire" },
            { name: "Peaktrice-M", image: "https://i.ibb.co/gMKmcWxv/Peakatrice-M-1.png", type: "Fire/Melee" },
            { name: "Peaktrice-F", image: "https://i.ibb.co/4ZbsdbFV/Peakatrice-F-1.png", type: "Fire/Melee" },
            { name: "Myphoxic", image: "https://i.ibb.co/5X01v9b2/Myphoxic-1.png", type: "Poison" },
            { name: "Korbid", image: "https://i.ibb.co/11MxSFS/Korbid-1.png", type: "Spirit/Air" },
            { name: "Gladilightor", image: "https://i.ibb.co/p65TGTpd/Gladilightor-1.png", type: "Light/Metal" },
            { name: "Gauntcier", image: "https://i.ibb.co/HLD5H6np/Gauntcier-1.png", type: "Ice/Metal" },
            { name: "Cresceroken", image: "https://i.ibb.co/V0V72Jrj/Cresceroken-1.png", type: "Dark/Mind" },
            { name: "Butterlivion", image: "https://i.ibb.co/0Rp88mLz/Butterlivion-1.png", type: "Insect/Mind" },
            { name: "Arctadon", image: "https://i.ibb.co/Kx8yJ3t3/Arctadon-1.png", type: "Melee/Ice" },
            { name: "Hangryphus-A", image: "https://i.ibb.co/chKcgnZn/Image.png", type: "Food/Melee" },
            { name: "Exoskelis-A", image: "https://i.ibb.co/cc5xLy1d/Mega-skellington131-1.png", type: "Insect/Dark" },
            { name: "Draspodon", image: "https://i.ibb.co/6RkJtzQX/Draspodon-1.webp", type: "Fire/Insect" },
            { name: "Twisstler", image: "https://i.ibb.co/N6pvTbbF/Image.png", type: "Food/Poison" },
            { name: "Mawsoleum", image: "https://i.ibb.co/1YGr5W0k/Mawsoleum-1.png", type: "Spirit/Earth" },
        ];
        const basicMoves = [
            "Allure", "Armor Break", "Armor Up", "Bark", "Blowup Blast", 
            "Body Slam", "Boom Boom", "Boring Show", "Calming Melody", 
            "Careless Assault", "Cauterizing Smash", "Center of Attention", 
            "Charge", "Chemical Breath", "Claw Swipes", "Climate Shot", 
            "Coil", "Combo Support", "Crit Up", "Crocodile Tears", 
            "Cutesy Glare", "Disarm", "Dispose", "Do Nothing", "Entertain", 
            "Equality", "Focus", "FTL Assault", "Glancing Blow", "Harden", 
            "Haste", "Headbutt", "Heal", "Hide", "Hop", "Howl", "Hype Up", 
            "Hyper Scream", "Hyper Voice", "Jolly Dance", "Lick", "Marking Bite", 
            "Mock Charge", "Multi-Hit", "Multi-Smack", "Panhandle", "Party!", 
            "Patchwork", "Pirouette", "Preparation", "Protect", "Purl Stitch", 
            "Quick Strike", "Relief", "Roll", "Sad Zone", "Scapegoat", "Scram", 
            "Screech", "Shellshock", "Shield Bash", "Slash", "Smack", "Smokescreen", 
            "Squeak", "Starbreaker", "Subterfuge", "Swagger Dance", "Swipe", 
            "Tail Smack", "Tourniquet", "Trap", "Tri-Elemental Slash", "Wildcard", 
            "Wrap", "Yarn Snare","Elemental Claws", "Mood Swing","Final Gambit","Loyalty","Fortify", "Metachrosis",
            "Curious Beam",
        ];


        const mythicMoves = [
            "Attack Seal", "Louis Prayer", "Meteor Shower", 
            "Mythic Blast", "Playtime's Over", "Reverse Singularity", 
            "The World"
        ];

  
        const fireMoves = [
            "Boil Bomb", "Burning Orb", "Fiery Bite", "Fiery Punch", 
            "Fiery Slash", "Fireball", "Firebolt", "Firecracker", 
            "Flame Rattle", "Flame Shield", "Flames of Gehenna", 
            "Forest Fire", "Foxfire", "Heat Bash", "Inflame", 
            "Incinerate", "Lava Toss", "Raging Bonfire", "Sizzle", 
            "Solar Flare", "Soulfire","Pyroclast", "Infernal Hold",
            "Charcoil",
        ];


        const waterMoves = [
            "Aquagel", "Aqua Cannon", "Bubble Shield", "Capsize", 
            "Croak", "Fin Slash", "Hydro Burst", "Rainmaker", 
            "Rapid Current", "Rip Current", "Rust", "Siren Song", 
            "Storm Heal", "Swamp", "Tainted Water", "Tears of Sorrow", 
            "The Flood", "Tidal Slam", "Tsunami", "Tsunami Drop", 
            "Waterbolt", "Wave Shot"
        ];


        const plantMoves = [
            "1,000 Needles", "Armillaria", "Barb Barrier", 
            "Barkskin", "Branch Launch", "Compost", 
            "Entangling Vines", "Floral Fang", "Hemlock Hit", 
            "Leaf Blade", "Leaf Sap", "Leaf Tornado", 
            "Life Roots", "Life Sap", "Lilypad Leap", 
            "Nature's Guardian", "Needle Spike", "Paralysis Spores", 
            "Parasitic Seeds", "Plant Sap", "Pumpkin Spin", 
            "Rage Spores", "Sakura Blast", "Seed Assault", 
            "Slash and Burn", "Sleep Spores", "Thorns of Wrath", 
            "Thorny Thwack", "Wild Growth", "Gardentend", "Bunny Distraction", "Rotting Mire", "Territorial Assault",
        ];


        const electricMoves = [
            "Crackling Static", "Electrical Burns", "Electrify", 
            "Electro Bite", "Electro Punch", "Electro Slash", 
            "Energized", "Lightning Kicks", "Pylons", 
            "Quad Strike", "Recharge", "Shock", 
            "Shock Therapy", "Shock Wave", "Taser", 
            "Thunder Strike", "Thunderstorm", "Zeppelin Zap","Thunder Drum","Jolt","Voltage Slide", "Breakneck Blitz", "Jolt",
        ];


        const beastMoves = [
            "Berserk", "Bestial Roar", "Bestial Wrath",
            "Bite", "Call of the Wild", "Crunch",
            "Double Bite", "Feral Fury", "Ferocious Onslaught",
            "Horn Pierce", "Jumble Clobber", "Primal Rage",
            "Ravenous Rush", "Savage Blow", "Sharp Claws",
            "Treacherous Gnaw", "War Cry", "Wild Ravage","Commanding Blow"
        ];


        const airMoves = [
            "Aerial", "Aero Storm", "Air Strike",
            "Balloon Boost", "Eagle Eye", "Festive Fervor",
            "Gust", "Hit-n-Run", "Jet Strike",
            "Nose Dive", "Peck", "Shifting Winds",
            "Sylphid", "Tempest", "Wind Shear",
            "Wing Slash","Sky Rend"
        ];


        const bugMoves = [
            "Antenna Beam", "Bee Summon", "Butterfly Effect",
            "Entomophobia", "Fatal Sting", "Insect Instinct",
            "Itchy Bite", "Mandible Wound", "Nibble",
            "Quick Sting", "Serrated Claws", "Skitter",
            "Swaddle", "Swarm", "Web", "Web Ball","Panic Pounce","Spicefield",
            "Hivemind","Malware Mangle","Opening Talon"
        ];


        const earthMoves = [
            "Dirt Lump", "Earth Lance", "Earth Surge",
            "Earthquake", "Landslide", "Mend",
            "Mud Spit", "Mud Wave", "Pebble",
            "Rumbling Charge", "Rusty Roots", "Sandstorm",
            "Sedimentary Defense", "Shale", "Shatter",
            "Shell Crash", "Stalactites", "Stampede"
        ];


        const mindMoves = [
            "Agitate", "Ascending Flow", "Compose",
            "Enlightenment", "Forced Repetition", "Harmony",
            "Magical Shield", "Meditation", "Mind Drain",
            "Mind Empowerment", "Mind Power", "Psychic Ram",
            "Psycho Crush", "Psychoforce", "Psychokinetic Launch",
            "Quick Thinking", "Recombobulate", "Rest",
            "Sleep n' Steal", "Timed Trap", "Trade",
            "Trait Exchange", "Wide Shield","Teletoss", "Psychic Mirror", 
        ];


        const meleeMoves = [
            "Adrenaline", "Body Throw", "Bone Club", "Challenge", "Chi Blast",
            "Clumsy Swing", "Counter Punch", "Crush", "Daze", "Drill Sergeant",
            "Energy Wave", "Flurry", "Helicopter Kick", "Life-Ender", "Piercing Poke",
            "Pummel", "Ready to Fight", "Reckless Charge", "Roundhouse Kick",
            "Solid Charge", "Swift Hook", "Swift Shield", "Toughen", "Unguarded Strike"
        ];


        const foodMoves = [
            "Bullet Corn", "Cake Walk", "Chocolate Rain", "Create Jelly", "Devour",
            "Empty Calories", "Fast Food", "Fatten Up", "Feast", "Food Fight",
            "Glaze Punch", "Heckie", "Honey Slap", "Just Desserts", "Nutrient Drain",
            "Pie Gag", "Seasoning", "Snack Chomp", "Spicy Tackle", "Sugar Kiss",
            "Sugar Rush", "Sweet Aroma", "Takeout","Savory Slam", "Last Course", "Sweet Remains","Sugarfade",
            "Explosive Popcorn","Sugar Crash","Sugar Shock","Bite and Blight",
        ];

 
        const lightMoves = [
            "Abyss Breaker", "Aurora Flash", "Blinding Lights", "Blessed Blade",
            "Continuous Sheen", "Divine Light", "Flare", "Flashbang", "Flashing Strike",
            "Glimmer Wing", "Glow Up", "Hope Beacon", "Laser", "Lightspeed Flurry",
            "Purge", "Radiant Beam", "Shining Severance", "Light Hook","Blazing Comet",
            "Light Show", "Dissolution",
        ];


        const crystalMoves = [
            "Alloy Missiles", "Crystal Armor", "Crystal Arrow", "Crystal Cut",
            "Crystal Dust", "Crystal Storm", "Crystal Wall", "Diamond Dash",
            "Flaunt", "Gem Blast", "Geode Smash", "Jewel Jab", "Opal Pulse",
            "Rupture", "Shard Surge", "Sparkling Finish", "Transcendent Power","Gleamspire"
        ];


        const metalMoves = [
            "Binary Blitz", "Bonk", "Chain Imprisonment", "Gatling Gifts",
            "Iron Chomp", "Iron Slash", "Mercury Puddle", "Meteor Launch",
            "Mineral Cannon", "Precision Dart", "Scissor Guard", "Sharpen",
            "Stab", "Sword Sweep","Regal Edge","Clampbound","Echo Broadcast",
            "Merry-Go-Breaker","Corkscrew Crash","Iron Embrace"
        ];


        const spiritMoves = [
            "Befuddlement", "Consume", "Treasure Curse", "Drain Life",
            "Gleeful Ruse", "Haunt", "Hex", "Hexblade", "Hex Punch",
            "Incantation", "Intangible", "Jealousy", "Misery Dance",
            "Murmur", "Necromancy", "Shadow Lurk", "Shadowy Eyes", "Sob",
            "Spectral Ire", "Spirit Claws", "Spirit Orb", "Vague Vortex",
            "Whisper", "Phantom Rush","Boo!","Ghostly Maw",
        ];

  
        const iceMoves = [
            "Absolute Zero", "Arctic Blitz", "Bowling Strike", "Chilling Chorus",
            "Cone Cannon", "Cone of Cold", "Flash Freeze", "Frostbite", "Frostgrip",
            "Glacial Cleave", "Ice Prison", "Icefall", "Icy Bite", "Icy Floor",
            "Icy Punch", "Icy Slash", "Icy Veil", "Piercing Ice", "Quick Ice",
            "Royal Ice", "Snap Freeze", "Snow Fort", "Snow Roller", "Snowball",
            "Subzero Blizzard", "Glacier Roll", "Shardclaw",
        ];

  
        const darkMoves = [
            "Ambush", "Chaotic Bolt", "Choke", "Cold Glance", "Dark Blast",
            "Dark Slash", "Darkness Expansion", "Expectorate", "Frenzied Darkness",
            "Hiss", "Insult", "Mutiny", "Night Night", "Pickpocket", "Pure Fear",
            "Pursuit", "Retribution", "Revitalize", "Scrutinize", "Shadowbolt",
            "Shadowstep", "Siphon Soul", "Sonata of Darkness", "Taunt",
            "Vampiric Strike", "Worthwhile Sacrifice","Mallet Crush"
        ];


        const poisonMoves = [
            "Acid Rain", "Bad Odor", "Belch", "Chemical Cleave", "Food Poisoning",
            "Foreign Substance", "Goo Blast", "Infection", "Lingering Poison",
            "Poison Gas", "Poison Ivy", "Poison Punch", "Poison Spores",
            "Sulfur Plume", "Surprise!", "Toxic Bomb", "Venom Bite",
            "Venom Lacerate", "Venomous Sting", "Canister","Last Lament"
        ];

        const helmets = ["None", "Artificer's Beanie", "Aviator Helmet", "Bowlcut", "Candy Headphones", "Decorated Hairclip", "Doodad", "Drenched Sunhat", "Eggshell Helmet", "Epic Shades", "Feathered Hat", "Glummish Cap", "Head Leaf", "Horned Headband", "Magnificent Tophat", "Marshmellow Fedora", "Pale Sunbonnet", "Scuba Goggles", "Smoldering Hood", "Theatre Mask", "Tinfoil Hat", "Preformers Mask", "Clown Hair", ];
        
        const amulets = ["None", "Crystal Shard", "DIY Pin", "Dark Brooch", "Dusty Bandana", "Festive Bow", "Geode Pendant", "Helpful Lantern", "Juniper Necklace", "Mini Camera", "Ornate Necklace", "Rock Candy", "Ruby Pendant", "Sandstone Necklace", "Sapphire Amulet", "Scrap Paper", "Sticky Pendant", "Stone Necklace", "Swag Juice", "Toxic Vial", "Vial of Tears", "Whatchamacallit", "Buggle Ball", "Penant String", ];
        
        const artifacts = ["None", "Amber Trapped Fly", "Beach Ball", "Broken Clay", "Chewed Up Bone", "Coal", "Computer Mouse", "Crumpled Water Bottle", "Decorative Katana", "Faunsprout Tail", "Fluffy Feather", "Golden Stick", "Luminous Orb", "Oakwood Staff", "Pizza Slice", "Potted Cactus", "Pure Tear", "Sad Pebblett", "Scone", "Scrapped Cardboard", "Stick", "Thingamajig", "Tombstone", "White Chocolate", "Firework", "Popcorn", ];
        
        const stats = ["+10% Health", "+10% Attack", "+10% Defense", "+10% Magic Attack", "+10% Magic Defense", "+10% Speed"];
        
        const heldItems = ["None", "Acid Storm in a Bottle", "Air Candy Cube", "Air Taffy", "Arid Wand", "Basic Candy Cube", "Basic Taffy", "Battery", "Beast Candy Cube", "Beast Taffy", "Blueprint", "Bubblegum", "Bubble Wand", "Champion Belt", "Conductor's Baton", "Confectioner's Wand", "Corrosive Wand", "Crooked Talon", "Crystal Candy Cube", "Crystal Taffy", "Cure Jelly", "Cursed Cloak", "Dark Candy Cube", "Dark Chocolate", "Dark Taffy", "Decorative Fan", "Defensive Jelly", "Delicate Wing", "Determination Jelly", "Determination Headband", "Earth Candy Cube", "Earth Data", "Earth Taffy", "Empowered Ring", "Enchanted Emerald", "Enchanted Ruby", "Enchanted Sapphire", "Fire Candy Cube", "Fire Data", "Fire Taffy", "Food Candy Cube", "Food Taffy", "Friendship Ribbon", "Frozen TV Dinner", "Gauze Wrap", "Glasses", "Grease", "Heal Jelly", "Homemade Plush", "Ice Candy Cube", "Ice Data", "Ice Pack", "Ice Taffy", "Imbued Relic", "Insect Candy Cube", "Insect Taffy", "Jetpack", "Laminate", "Lethal Ornament", "Lighter", "Light Candy Cube", "Light Taffy", "Lucky Pebble", "Magical Jelly", "Magic Wand", "Matchbox", "Melee Candy Cube", "Melee Taffy", "Metal Candy Cube", "Metal Taffy", "Mind Candy Cube", "Mind Taffy", "Moon Charm", "Mythic Candy Cube", "Mythic Taffy", "Perfect Alloy", "Plant Candy Cube", "Plant Taffy", "Poison Candy Cube", "Poison Taffy", "Power Jelly", "Pretty Seashell", "Questionable Sludge", "Refined Crystal", "Refractive Prism", "Riot Shield", "Running Shoes", "Sickly Doze", "Sponge", "Small Sprout", "Sniper Scope", "Spark Candy Cube", "Spark Data", "Spark Taffy", "Speed Jelly", "Spirit Candy Cube", "Spirit Jar", "Spirit Taffy", "Starry Glasses", "Stormy Wand", "Strength Jelly", "Studded Fang", "Spiky Thorns", "Soothing Charm", "Unwashed Plushie", "Used Crayons", "Used Timber", "Wake-Up Jelly", "Water Candy Cube", "Water Taffy", "Wierd Jelly", "Hypnotl's Antigen", "Calamander's Candy", "Umaisho Matcha", "Ostigon Collar", "Vermorph Goggles", "Jinglark Present", "Mawthra Rune", "Thornet Rune", "Tufflaze Rune", "Voltenchant Rune", "Theaterror Rune", "Maskomedy Rune", "Mourveil Rune", "Malotrick Rune", "Tulenna Rune", "Staligant Rune", "Corrolizard Rune", "Staligant Rune", "Grufflin Rune", "Skadean Rune", "Partybug Rune", "Somberock Rune", "Nyanto Rune", "Suomous Rune", "Daeferno Rune", "Vigimante Rune", "Groato Rune", "Lumiline Rune", "Cacmeow Rune", "Cryotera Rune", "Spectatik Rune", "Bionotic Rune", "Archopos Rune", "Cerebopod Rune", "Hattrix Rune", "Cragildae Rune", "Bubbul Rune", "Snowclowne Silly Cone", "Onion", "Ruler", "Doomflower", "Potassium Conduit", "Jellupy Whisk", "Fancyoon Boa", "Yo-yo", "Old Monitor", "Pinball String", "Prize Claw", "Arcade Joystick", "Surge DNA (Velocivult)", "Spore DNA (Trithorn)", "Ember DNA (Volcanur)", "Virus DNA (Myphoxic)", "Hangryphus Pie", "Exoskelis Shard", "Void Jelly", "Relay Jelly", "Loop Jelly", "Whirlwind Jelly", "Bell Jelly", "Gift Jelly",];
        
        const traits = ["Absorber", "Accelerate", "Acid Advance", "Adaptive", "Adipose", "Air Current", "Alacrity", "Almagest", "Aloe Vera", "Ambrosia", "Amp It Up", "Analytical", "Annihilation", "Annoying Insect", "Anti-Paralysis", "Antivenom", "Apathetic", "Apex", "Apparition", "Archmage", "Arid", "Arsonist", "Avenger", "Balloon Pop", "Banana Peel", "Bandit", "Barkenstein", "Basic Care", "Battery Charge", "Bee Arena", "Berry Good", "Bird of Prey", "Blinding Rocks", "Bludgeon", "Bogdown", "Bon Appetit", "Botulism", "Brainwash", "Bright Lights", "Bubble Blaster", "Bug Zapper", "Bulwark", "Burning Beast", "Burning Body", "Bypass", "Caliginous", "Calm", "Caloric Deficit", "Capoeira", "Capricious", "Cardinal Sins", "Careless", "Chanting", "Chef", "Chemical Explosion", "Chivalry", "Chlorobite", "Chlorokinesis", "Chocolate Drizzle", "Clearcut Ore", "Combustion", "Composed", "Concentrated", "Conductor", "Confidence", "Contagion", "Corrosion", "Courteous", "Covetous", "Cracked", "Crispy", "Crowd Support", "Crude", "Crystalline", "Crystallization", "Daring Devil", "Dauntless", "Decay", "Deepfreeze", "Delicate", "Desert Body", "Destructive Anger", "Deterrant Sabre", "Detox", "Dimwitted", "Direct Combatant", "Doll Eyes", "Discover", "Divine Beast", "Downpour", "Duel", "Durable", "Dust Dash", "Dust Storm", "Edible Treat", "Efficient Proxy", "Electrocute", "Elegance", "Elemental Resist", "Enfeeble", "Entangle", "Entertainer", "Envy", "Eruption", "Escapist", "Ethereal", "Evasive", "Everlasting", "Evil Glare", "Exoskeleton", "Extinguisher", "Ferocity", "Filament", "Fire Up", "Fireproof Armor", "Firestarter", "Firewall", "First Degree Burns", "Fish Outta Water", "Floaty", "Foam Guard", "Forbidden Knowledge", "Fortified", "Four Eyes", "Fur Coat", "Galvanize", "Gaseous Form", "Gauze", "Gift Giver", "Gloomy", "Glutton", "Goliath", "Graceful", "Grass Cloak", "Guardian", "Guilt", "Gunk Spark", "Hammer Claw", "Hammer Time", "Hard Candy", "Hardy", "Harlequin", "Hawkeye", "Healthy Toxins", "Heavy Storms", "Helios", "Herbivore", "Hidden Strength", "High Value Target", "Hiruddtherapy", "Holy Water", "Hunter", "Hydration", "Hypothermia", "Ice Stream", "Ignorant", "Illogical", "Incandescent", "Insatiable Greed", "Iron Will", "Jab Cross", "Jelly Enhancer", "Jelly Lover", "Jester Privilege", "Electrician", "Kaleidoscope", "Karna", "Kindling", "Leech", "Levitate", "Light Orb", "Lightfooted", "Lipid Scale", "Lithe", "Luminosity", "Magician", "Mark Territory", "Melting Point", "Menacing Snarl", "Mental Depletion", "Mental Momentum", "Merciless", "Mimic", "Mind Control", "Mind Games", "Misery Guard", "Molt", "Moratorium", "Mushboom", "Mushroom Maneuver", "Naughty List", "Night Harbinger", "Nihil", "Nimble", "Nimbostratus", "Nitelite", "Nonchalant", "Nullify", "Oasis Deity", "Oil Spill", "Opportunist", "Outboxer", "Overbite", "Overwhelm", "Owolspeed", "Paper Cut", "Paralyzing Agent", "Parry", "Pecking Order", "Poison Absorb", "Poison Precipitation", "Poisonous Skin", "Pollen Armor", "Possession", "Precise", "Premonition", "Proboscis", "Pugilist", "Puncture", "Puppeteer", "Rain Power", "Ramming Speed", "Rapier", "Razor Skin", "Reactive Shock", "Reaper", "Reflective", "Reformation", "Refresh", "Refreshed Resilience", "Rejuvenator", "Relentless", "Resentment", "Resilience", "Restless", "Retaliate", "Revenant", "Revival", "Robust", "Routine", "Royal Decree", "Rubber Tissue", "Rugged", "Rule of Cool", "Rush", "Sand Screen", "Sand Shield", "Sand Surge", "Sand Swap", "Savage", "Scarf Down", "Scavenge", "Scorch", "Sea Goddess Disciple", "Second Mind", "Secret Darkness", "Seed Defense", "Serenade", "Sharp Fangs", "Sharp Reflexes", "Sickly Sweet", "Silly", "Skyborn", "Slash Expert", "Snailspeed", "Soul Fortification", "Soul Link", "Speedy Recovery", "Speed of Swag", "Spell Shield", "Spellcaster", "Spiteful", "Splintered Shards", "Split", "Spooky", "Spool", "Stabby Stabby", "Static Charge", "Steam Guard", "Sticky", "Stinky", "Stitching", "Stonefaced", "Storm Surge", "Stormwater", "Strong Armor", "Sugar Coating", "Superluminal", "Symbiosis", "Tainted", "Tangled", "Tar Body", "Tenacious", "The Flock", "The Fungus", "Thievery", "Thermal Energy", "Time Paralysis", "Time Stop", "Titanium Bucket", "Toxicity", "Trait", "Trick or Treat", "Trickster", "True Power", "Trump Card", "Tumble", "Turbulent", "Ugly", "Unbreakable", "Unraveling", "Vampire", "Vengeance", "Vicious", "Vigor", "Virulent Venom", "Viscosity", "Vitality", "Vocalist", "Ward", "Warden", "Water Absorb", "Whimsical", "Wish For Experience", "Wish For Power", "Wish For Wealth", "Your Meowjesty", "Impale", "Florist", "Phasmophobia", "Poison Sustenance", "Pollen Spread", "Monarch", "Sovereign", "To Arms!", "Kingly Aura", "Unpredictable", "Last Laugh", "Impersonate", "Static Purge", "Thunder Gut", "Overcharge", "Hydro Coating", "Iron Pincer", "Frostillery", "Steeped Spirit", "Reheat", "Signal Jammer", "Overgrowth Protocol", "Paragon Skin", "Flourish", "Last Lament", "Blightfrost", "Jelly Sync", "Mischievious", "Hero Spark", "Foul Welcome", "Pop Reflexes", "Spicehound", "Meat Shield", "Glucose Boost", "Impact Recoil", "Glitter Trail", "Curtain Call", "Impervious", "Rollercoaster", "Steel Frame", "Looper", "Kernal Scatter", "Grand Entrance", "Proliferate", "Assassin", "Binary Guard", "Firmware Update", "Last Stand", "Justicar", "Volcanic Core", "Verdant Predation", "Cursed Growth", "Short Circuit", "Home Ground", "Nullcoat", "True Flame", "Lunarc", "Animosity", "Heartbreak", "Altertype", "Metalant", "Venandi Feast",];

        const MAX_TEAMS = 5;
        let teams = [];
        let currentTeamIndex = -1;
        let defensiveDoodleCount = 1;
        let offensiveDoodleCount = 1;
        let draggedItem = null;

        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', function() {
                    const targetPage = this.getAttribute('data-page');
                    
                    document.querySelectorAll('.nav-button').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    document.querySelectorAll('.page').forEach(page => {
                        page.classList.remove('active');
                    });
                    document.getElementById(targetPage).classList.add('active');
                });
            });

            initialize();
        });

        function initialize() {
            initializeTeambuilder();
            initializeDefensiveCalculator();
            initializeOffensiveCalculator();
        }

        function initializeTeambuilder() {
            populateDoodleDropdown();
            loadFromStorage();
            setupEventListeners();
            
            if (teams.length === 0) {
                addTeam();
            } else {
                updateTeamSelect();
                currentTeamIndex = 0;
                loadTeam(currentTeamIndex);
            }
        }

        function populateDoodleDropdown() {
            const doodleOptions = document.getElementById('doodle-options');
            doodleOptions.innerHTML = '';
            
            if (doodles && doodles.length > 0) {
                doodles.forEach(doodle => {
                    const option = document.createElement('div');
                    option.className = 'dropdown-option';
                    option.textContent = doodle.name;
                    option.dataset.value = doodle.name;
                    option.dataset.image = doodle.image;
                    option.dataset.type = doodle.type;
                    
                    option.addEventListener('click', function() {
                        document.getElementById('doodle-header').querySelector('span').textContent = doodle.name;
                        document.getElementById('doodle-list').classList.remove('active');
                        
                        document.querySelectorAll('#doodle-options .dropdown-option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        this.classList.add('selected');
                    });
                    
                    doodleOptions.appendChild(option);
                });
            }
        }

        function setupEventListeners() {
            document.getElementById('add-team').addEventListener('click', addTeam);
            document.getElementById('delete-team').addEventListener('click', deleteTeam);
            document.getElementById('team-select').addEventListener('change', changeTeam);
            document.getElementById('team-name').addEventListener('change', updateTeamName);
            document.getElementById('add-doodle').addEventListener('click', addDoodleToTeam);
            document.getElementById('copy-code').addEventListener('click', copyTeamCode);
            document.getElementById('import-code').addEventListener('click', importTeamCode);
            document.getElementById('import-text').addEventListener('click', importFromText);
            
            const doodleHeader = document.getElementById('doodle-header');
            const doodleList = document.getElementById('doodle-list');
            const doodleSearch = document.getElementById('doodle-search');
            
            doodleHeader.addEventListener('click', function() {
                doodleList.classList.toggle('active');
                if (doodleList.classList.contains('active')) {
                    doodleSearch.focus();
                }
            });
            
            doodleSearch.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const options = document.querySelectorAll('#doodle-options .dropdown-option');
                
                options.forEach(option => {
                    const text = option.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        option.style.display = 'block';
                    } else {
                        option.style.display = 'none';
                    }
                });
            });
            
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.custom-dropdown')) {
                    doodleList.classList.remove('active');
                }
            });
        }

        function addTeam() {
            if (teams.length >= MAX_TEAMS) {
                alert(`Maximum of ${MAX_TEAMS} teams reached!`);
                return;
            }

            let teamNumber = 1;
            const teamNames = teams.map(team => team.name);
            while (teamNames.includes(`Team ${teamNumber}`)) {
                teamNumber++;
            }

            const newTeam = {
                name: `Team ${teamNumber}`,
                notes: "",
                doodles: []
            };

            teams.push(newTeam);
            currentTeamIndex = teams.length - 1;
            updateTeamSelect();
            loadTeam(currentTeamIndex);
            saveToStorage();
        }

        function deleteTeam() {
            if (teams.length <= 1) {
                alert("You must have at least one team!");
                return;
            }

            if (currentTeamIndex === -1) return;

            saveCurrentTeamState();
            
            teams.splice(currentTeamIndex, 1);
            
            if (currentTeamIndex >= teams.length) {
                currentTeamIndex = teams.length - 1;
            }

            updateTeamSelect();
            loadTeam(currentTeamIndex);
            saveToStorage();
        }

        function changeTeam() {
            const select = document.getElementById('team-select');
            const newIndex = parseInt(select.value);
            
            if (currentTeamIndex !== -1 && currentTeamIndex !== newIndex) {
                saveCurrentTeamState();
            }
            
            currentTeamIndex = newIndex;
            if (currentTeamIndex >= 0) {
                loadTeam(currentTeamIndex);
            }
        }

        function saveCurrentTeamState() {
            if (currentTeamIndex === -1) return;
            
            teams[currentTeamIndex].name = document.getElementById('team-name').value || `Team ${currentTeamIndex + 1}`;
            
            const doodleCards = document.querySelectorAll('.doodle-card');
            doodleCards.forEach((card, index) => {
                if (index < teams[currentTeamIndex].doodles.length) {
                    const moveSelects = card.querySelectorAll('.moves-container select');
                    moveSelects.forEach((select, moveIndex) => {
                        teams[currentTeamIndex].doodles[index].moves[moveIndex] = select.value;
                    });
                    
                    const traitSelect = card.querySelector('.trait-select');
                    if (traitSelect) {
                        teams[currentTeamIndex].doodles[index].trait = traitSelect.value;
                    }
                    
                    const heldItemSelect = card.querySelector('.held-item-select');
                    if (heldItemSelect) {
                        teams[currentTeamIndex].doodles[index].heldItem = heldItemSelect.value;
                    }
                    
                    const statSelects = card.querySelectorAll('.stat-select');
                    statSelects.forEach((select, statIndex) => {
                        teams[currentTeamIndex].doodles[index].stats[statIndex] = select.value;
                    });
                    
                    const helmetSelect = card.querySelector('.helmet-select');
                    const amuletSelect = card.querySelector('.amulet-select');
                    const artifactSelect = card.querySelector('.artifact-select');
                    
                    if (helmetSelect) {
                        teams[currentTeamIndex].doodles[index].equipment.helmet = helmetSelect.value;
                    }
                    if (amuletSelect) {
                        teams[currentTeamIndex].doodles[index].equipment.amulet = amuletSelect.value;
                    }
                    if (artifactSelect) {
                        teams[currentTeamIndex].doodles[index].equipment.artifact = artifactSelect.value;
                    }
                }
            });
            
            saveToStorage();
        }

        function updateTeamName() {
            if (currentTeamIndex === -1) return;
            const newName = document.getElementById('team-name').value || `Team ${currentTeamIndex + 1}`;
            teams[currentTeamIndex].name = newName;
            updateTeamSelect();
            saveToStorage();
        }

        function updateTeamSelect() {
            const teamSelect = document.getElementById('team-select');
            teamSelect.innerHTML = '';
            
            teams.forEach((team, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = team.name;
                if (index === currentTeamIndex) {
                    option.selected = true;
                }
                teamSelect.appendChild(option);
            });
        }

        function addDoodleToTeam() {
            if (currentTeamIndex === -1) {
                alert("Please select or create a team first!");
                return;
            }
            
            if (teams[currentTeamIndex].doodles.length >= 6) {
                alert('Team is full! Maximum 6 doodles allowed.');
                return;
            }
            
            const selectedDoodleName = document.getElementById('doodle-header').querySelector('span').textContent;
            if (selectedDoodleName === 'Select a Doodle') {
                alert('Please select a doodle first!');
                return;
            }
            
            const doodle = doodles.find(d => d.name === selectedDoodleName);
            if (doodle) {
                teams[currentTeamIndex].doodles.push({
                    name: doodle.name,
                    image: doodle.image,
                    type: doodle.type,
                    moves: ["", "", "", ""],
                    trait: "",
                    heldItem: "",
                    stats: ["", ""],
                    equipment: {
                        helmet: "None",
                        amulet: "None",
                        artifact: "None"
                    }
                });
                renderTeam();
                saveToStorage();
                
                document.getElementById('doodle-header').querySelector('span').textContent = 'Select a Doodle';
                document.querySelectorAll('#doodle-options .dropdown-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
            }
        }

        function removeDoodle(index) {
            if (currentTeamIndex === -1) return;
            teams[currentTeamIndex].doodles.splice(index, 1);
            renderTeam();
            saveToStorage();
        }

        window.updateDoodleData = function(doodleIndex, field, value) {
            if (currentTeamIndex === -1) return;
            if (field.includes('.')) {
                const parts = field.split('.');
                teams[currentTeamIndex].doodles[doodleIndex][parts[0]][parts[1]] = value;
            } else {
                teams[currentTeamIndex].doodles[doodleIndex][field] = value;
            }
            saveToStorage();
            
            if (field.startsWith('moves.')) {
                updateMoveColors(doodleIndex);
            }
        };

        function updateMoveColors(doodleIndex) {
            const doodle = teams[currentTeamIndex].doodles[doodleIndex];
            if (!doodle) return;
            
            for (let i = 0; i < 4; i++) {
                const moveSelect = document.querySelector(`#doodle-card-${doodleIndex} .moves-container select:nth-child(${i+1})`);
                if (moveSelect) {
                    const selectedOption = moveSelect.options[moveSelect.selectedIndex];
                    
                    moveSelect.classList.remove(
                        'move-mythic', 'move-fire', 'move-water', 'move-plant', 
                        'move-spark', 'move-beast', 'move-air', 'move-insect',
                        'move-earth', 'move-mind', 'move-melee', 'move-food',
                        'move-light', 'move-crystal', 'move-metal', 'move-spirit',
                        'move-ice', 'move-dark', 'move-poison', 'move-basic'
                    );
                    
                    const moveType = getMoveType(selectedOption.value);
                    if (moveType) {
                        moveSelect.classList.add(`move-${moveType.toLowerCase()}`);
                    }
                }
            }
        }

        function getMoveType(moveName) {
            if (!moveName) return null;
            
            if (mythicMoves.includes(moveName)) return 'Mythic';
            if (fireMoves.includes(moveName)) return 'Fire';
            if (waterMoves.includes(moveName)) return 'Water';
            if (plantMoves.includes(moveName)) return 'Plant';
            if (electricMoves.includes(moveName)) return 'Spark';
            if (beastMoves.includes(moveName)) return 'Beast';
            if (airMoves.includes(moveName)) return 'Air';
            if (bugMoves.includes(moveName)) return 'Insect';
            if (earthMoves.includes(moveName)) return 'Earth';
            if (mindMoves.includes(moveName)) return 'Mind';
            if (meleeMoves.includes(moveName)) return 'Melee';
            if (foodMoves.includes(moveName)) return 'Food';
            if (lightMoves.includes(moveName)) return 'Light';
            if (crystalMoves.includes(moveName)) return 'Crystal';
            if (metalMoves.includes(moveName)) return 'Metal';
            if (spiritMoves.includes(moveName)) return 'Spirit';
            if (iceMoves.includes(moveName)) return 'Ice';
            if (darkMoves.includes(moveName)) return 'Dark';
            if (poisonMoves.includes(moveName)) return 'Poison';
            
            return 'Basic';
        }

        function renderTeam() {
            if (currentTeamIndex === -1) return;
            
            const teamDisplay = document.getElementById('team-display');
            teamDisplay.innerHTML = '';
            
            teams[currentTeamIndex].doodles.forEach((doodle, index) => {
                const card = createDoodleCard(doodle, index);
                teamDisplay.appendChild(card);
            });
        }

        function createDoodleCard(doodle, index) {
            const card = document.createElement('div');
            card.className = 'doodle-card';
            card.id = `doodle-card-${index}`;
            card.draggable = true;
            card.dataset.index = index;
            
            card.addEventListener('dragstart', handleDragStart);
            card.addEventListener('dragover', handleDragOver);
            card.addEventListener('dragenter', handleDragEnter);
            card.addEventListener('dragleave', handleDragLeave);
            card.addEventListener('drop', handleDrop);
            card.addEventListener('dragend', handleDragEnd);
            
            const cardHeader = document.createElement('div');
            cardHeader.className = 'card-header';
            
            const slotInfo = document.createElement('div');
            slotInfo.textContent = `Slot ${index + 1}`;
            slotInfo.style.fontWeight = 'bold';
            slotInfo.style.color = 'var(--header-color)';
            
            const cardButtons = document.createElement('div');
            cardButtons.className = 'card-buttons';
            
            const clearBtn = document.createElement('button');
            clearBtn.className = 'card-btn';
            clearBtn.textContent = 'Clear';
            clearBtn.onclick = () => clearDoodleCard(index);
            
            const exportBtn = document.createElement('button');
            exportBtn.className = 'card-btn';
            exportBtn.textContent = 'Export';
            exportBtn.onclick = () => exportDoodleToText(index);
            
            cardButtons.appendChild(clearBtn);
            cardButtons.appendChild(exportBtn);
            cardHeader.appendChild(slotInfo);
            cardHeader.appendChild(cardButtons);
            
            const doodleInfo = document.createElement('div');
            doodleInfo.className = 'doodle-sprite-container';
            
            const sprite = document.createElement('div');
            sprite.className = 'doodle-sprite';
            sprite.style.backgroundImage = `url(${doodle.image})`;
            
            const info = document.createElement('div');
            info.className = 'doodle-info';
            
            const name = document.createElement('div');
            name.className = 'doodle-name';
            name.textContent = doodle.name;
            
            const typeBadges = document.createElement('div');
            typeBadges.className = 'type-badges';
            const types = doodle.type.split('/');
            types.forEach(type => {
                const badge = document.createElement('span');
                badge.className = 'type-badge';
                badge.textContent = type;
                badge.style.backgroundColor = typeColors[type] || typeColors['Basic'];
                
                const icon = document.createElement('span');
                icon.className = 'type-icon';
                icon.style.backgroundImage = `url(${typeIcons[type] || typeIcons['Basic']})`;
                badge.prepend(icon);
                
                typeBadges.appendChild(badge);
            });
            
            info.appendChild(name);
            info.appendChild(typeBadges);
            
            doodleInfo.appendChild(sprite);
            doodleInfo.appendChild(info);
            
            const expandBtn = document.createElement('button');
            expandBtn.className = 'card-btn expand-btn';
            expandBtn.textContent = 'Expand';
            expandBtn.onclick = () => toggleExpandSection(index);
            
            const expandSection = document.createElement('div');
            expandSection.className = 'expand-section';
            expandSection.id = `expand-section-${index}`;
            
            card.appendChild(cardHeader);
            card.appendChild(doodleInfo);
            card.appendChild(expandBtn);
            card.appendChild(expandSection);
            
            setTimeout(() => {
                expandSection.innerHTML = createExpandSectionContent(doodle, index);
                setSelectedMoves(doodle, index);
                setSelectedStatsAndEquipment(doodle, index);
                setupCustomDropdowns(index);
            }, 0);
            
            return card;
        }

        function handleDragStart(e) {
            draggedItem = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', this.dataset.index);
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDragEnter(e) {
            e.preventDefault();
            this.classList.add('drag-over');
        }

        function handleDragLeave() {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            const fromIndex = parseInt(e.dataTransfer.getData('text/plain'));
            const toIndex = parseInt(this.dataset.index);
            
            if (fromIndex !== toIndex) {
                const team = teams[currentTeamIndex];
                [team.doodles[fromIndex], team.doodles[toIndex]] = [team.doodles[toIndex], team.doodles[fromIndex]];
                
                renderTeam();
                saveToStorage();
            }
        }

        function handleDragEnd() {
            this.classList.remove('dragging');
            document.querySelectorAll('.doodle-card').forEach(card => {
                card.classList.remove('drag-over');
            });
        }

        function setSelectedStatsAndEquipment(doodle, index) {
            for (let i = 0; i < 2; i++) {
                const statSelect = document.querySelector(`#doodle-card-${index} .stat-select:nth-child(${i+1})`);
                if (statSelect && doodle.stats[i]) {
                    statSelect.value = doodle.stats[i];
                }
            }

            const helmetSelect = document.querySelector(`#doodle-card-${index} .helmet-select`);
            const amuletSelect = document.querySelector(`#doodle-card-${index} .amulet-select`);
            const artifactSelect = document.querySelector(`#doodle-card-${index} .artifact-select`);

            if (helmetSelect) {
                helmetSelect.value = doodle.equipment.helmet || "None";
            }
            if (amuletSelect) {
                amuletSelect.value = doodle.equipment.amulet || "None";
            }
            if (artifactSelect) {
                artifactSelect.value = doodle.equipment.artifact || "None";
            }
        }

        function createExpandSectionContent(doodle, index) {
            const moveOptions = createMoveOptions();
            
            return `
                <div class="section-title">Moves</div>
                <div class="moves-container">
                    ${Array(4).fill().map((_, i) => {
                        const move = doodle.moves[i] || "";
                        const moveType = getMoveType(move);
                        const moveClass = moveType ? `move-${moveType.toLowerCase()}` : '';
                        
                        return `
                            <select class="${moveClass}" onchange="updateDoodleData(${index}, 'moves.${i}', this.value)">
                                <option value="">Select Move</option>
                                ${moveOptions}
                            </select>
                        `;
                    }).join('')}
                </div>
                
                <div class="section-title">Trait</div>
                <div class="custom-dropdown trait-dropdown" data-doodle="${index}">
                    <div class="dropdown-header trait-header">
                        <span>${doodle.trait || "Select Trait"}</span>
                        <span>▼</span>
                    </div>
                    <div class="dropdown-list trait-list">
                        <input type="text" class="dropdown-search trait-search" placeholder="Search traits...">
                        <div class="dropdown-options trait-options"></div>
                    </div>
                </div>
                
                <div class="section-title">Held Item</div>
                <div class="custom-dropdown held-item-dropdown" data-doodle="${index}">
                    <div class="dropdown-header held-item-header">
                        <span>${doodle.heldItem || "Held Item"}</span>
                        <span>▼</span>
                    </div>
                    <div class="dropdown-list held-item-list">
                        <input type="text" class="dropdown-search held-item-search" placeholder="Search held items...">
                        <div class="dropdown-options held-item-options"></div>
                    </div>
                </div>
                
                <div class="section-title">Stats</div>
                <div class="stats-container">
                    <select class="stat-select" onchange="updateDoodleData(${index}, 'stats.0', this.value)">
                        <option value="">Select Stat</option>
                        ${stats.map(s => `<option value="${s}" ${doodle.stats[0] === s ? 'selected' : ''}>${s}</option>`).join('')}
                    </select>
                    <select class="stat-select" onchange="updateDoodleData(${index}, 'stats.1', this.value)">
                        <option value="">Select Stat</option>
                        ${stats.map(s => `<option value="${s}" ${doodle.stats[1] === s ? 'selected' : ''}>${s}</option>`).join('')}
                    </select>
                </div>
                
                <div class="section-title">Equipment</div>
                <div class="equipment-container">
                    <select class="helmet-select" onchange="updateDoodleData(${index}, 'equipment.helmet', this.value)">
                        <option value="None">Helmet</option>
                        ${helmets.map(h => `<option value="${h}" ${doodle.equipment.helmet === h ? 'selected' : ''}>${h}</option>`).join('')}
                    </select>
                    <select class="amulet-select" onchange="updateDoodleData(${index}, 'equipment.amulet', this.value)">
                        <option value="None">Amulet</option>
                        ${amulets.map(a => `<option value="${a}" ${doodle.equipment.amulet === a ? 'selected' : ''}>${a}</option>`).join('')}
                    </select>
                    <select class="artifact-select" onchange="updateDoodleData(${index}, 'equipment.artifact', this.value)">
                        <option value="None">Artifact</option>
                        ${artifacts.map(a => `<option value="${a}" ${doodle.equipment.artifact === a ? 'selected' : ''}>${a}</option>`).join('')}
                    </select>
                </div>
            `;
        }

        function setupCustomDropdowns(index) {
            const traitDropdown = document.querySelector(`.trait-dropdown[data-doodle="${index}"]`);
            const traitHeader = traitDropdown.querySelector('.trait-header');
            const traitList = traitDropdown.querySelector('.trait-list');
            const traitSearch = traitDropdown.querySelector('.trait-search');
            const traitOptions = traitDropdown.querySelector('.trait-options');
            
            traits.forEach(trait => {
                const option = document.createElement('div');
                option.className = 'dropdown-option';
                option.textContent = trait;
                option.dataset.value = trait;
                
                option.addEventListener('click', function() {
                    traitHeader.querySelector('span').textContent = trait;
                    traitList.classList.remove('active');
                    updateDoodleData(index, 'trait', trait);
                    
                    traitOptions.querySelectorAll('.dropdown-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                });
                
                traitOptions.appendChild(option);
            });
            
            traitHeader.addEventListener('click', function() {
                traitList.classList.toggle('active');
                if (traitList.classList.contains('active')) {
                    traitSearch.focus();
                }
            });
            
            traitSearch.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const options = traitOptions.querySelectorAll('.dropdown-option');
                
                options.forEach(option => {
                    const text = option.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        option.style.display = 'block';
                    } else {
                        option.style.display = 'none';
                    }
                });
            });
            
            const heldItemDropdown = document.querySelector(`.held-item-dropdown[data-doodle="${index}"]`);
            const heldItemHeader = heldItemDropdown.querySelector('.held-item-header');
            const heldItemList = heldItemDropdown.querySelector('.held-item-list');
            const heldItemSearch = heldItemDropdown.querySelector('.held-item-search');
            const heldItemOptions = heldItemDropdown.querySelector('.held-item-options');
            
            heldItems.forEach(item => {
                const option = document.createElement('div');
                option.className = 'dropdown-option';
                option.textContent = item;
                option.dataset.value = item;
                
                option.addEventListener('click', function() {
                    heldItemHeader.querySelector('span').textContent = item;
                    heldItemList.classList.remove('active');
                    updateDoodleData(index, 'heldItem', item);
                    
                    heldItemOptions.querySelectorAll('.dropdown-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                });
                
                heldItemOptions.appendChild(option);
            });
            
            heldItemHeader.addEventListener('click', function() {
                heldItemList.classList.toggle('active');
                if (heldItemList.classList.contains('active')) {
                    heldItemSearch.focus();
                }
            });
            
            heldItemSearch.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const options = heldItemOptions.querySelectorAll('.dropdown-option');
                
                options.forEach(option => {
                    const text = option.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        option.style.display = 'block';
                    } else {
                        option.style.display = 'none';
                    }
                });
            });
            
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.trait-dropdown')) {
                    traitList.classList.remove('active');
                }
                if (!event.target.closest('.held-item-dropdown')) {
                    heldItemList.classList.remove('active');
                }
            });
        }

        function setSelectedMoves(doodle, index) {
            for (let i = 0; i < 4; i++) {
                const moveSelect = document.querySelector(`#doodle-card-${index} .moves-container select:nth-child(${i+1})`);
                if (moveSelect && doodle.moves[i]) {
                    moveSelect.value = doodle.moves[i];
                    updateMoveColors(index);
                }
            }
        }

        function createMoveOptions() {
            const moveGroups = [
                { moves: basicMoves, className: 'basic', type: 'Basic' },
                { moves: mythicMoves, className: 'mythic', type: 'Mythic' },
                { moves: fireMoves, className: 'fire', type: 'Fire' },
                { moves: waterMoves, className: 'water', type: 'Water' },
                { moves: plantMoves, className: 'plant', type: 'Plant' },
                { moves: electricMoves, className: 'spark', type: 'Spark' },
                { moves: beastMoves, className: 'beast', type: 'Beast' },
                { moves: airMoves, className: 'air', type: 'Air' },
                { moves: bugMoves, className: 'insect', type: 'Insect' },
                { moves: earthMoves, className: 'earth', type: 'Earth' },
                { moves: mindMoves, className: 'mind', type: 'Mind' },
                { moves: meleeMoves, className: 'melee', type: 'Melee' },
                { moves: foodMoves, className: 'food', type: 'Food' },
                { moves: lightMoves, className: 'light', type: 'Light' },
                { moves: crystalMoves, className: 'crystal', type: 'Crystal' },
                { moves: metalMoves, className: 'metal', type: 'Metal' },
                { moves: spiritMoves, className: 'spirit', type: 'Spirit' },
                { moves: iceMoves, className: 'ice', type: 'Ice' },
                { moves: darkMoves, className: 'dark', type: 'Dark' },
                { moves: poisonMoves, className: 'poison', type: 'Poison' }
            ];
            
            let options = '';
            moveGroups.forEach(group => {
                if (group.moves && group.moves.length > 0) {
                    group.moves.forEach(move => {
                        options += `<option value="${move}" class="move-${group.className}" data-type="${group.type}">${move}</option>`;
                    });
                }
            });
            
            return options;
        }

        function toggleExpandSection(index) {
            const expandSection = document.getElementById(`expand-section-${index}`);
            const expandBtn = document.querySelector(`#doodle-card-${index} .expand-btn`);
            
            if (expandSection.classList.contains('active')) {
                expandSection.classList.remove('active');
                expandBtn.textContent = 'Expand';
            } else {
                expandSection.classList.add('active');
                expandBtn.textContent = 'Hide';
                
                setTimeout(() => {
                    updateMoveColors(index);
                }, 10);
            }
        }

        function clearDoodleCard(index) {
            if (currentTeamIndex === -1) return;
            teams[currentTeamIndex].doodles.splice(index, 1);
            renderTeam();
            saveToStorage();
        }

        function exportDoodleToText(index) {
            if (currentTeamIndex === -1) return;
            
            const doodle = teams[currentTeamIndex].doodles[index];
            if (!doodle) return;
            
            let text = `${doodle.name} @ ${doodle.heldItem || "None"} - ${doodle.trait || "No Trait"} - ${doodle.equipment.helmet}/${doodle.equipment.amulet}/${doodle.equipment.artifact}`;
            
            const statsText = doodle.stats.filter(s => s).join(", ");
            if (statsText) {
                text += ` - ${statsText}`;
            }
            
            const moves = doodle.moves.filter(m => m).join("/");
            if (moves) {
                text += ` - ${moves}`;
            }
            
            navigator.clipboard.writeText(text)
                .then(() => alert("Doodle text copied to clipboard!"))
                .catch(() => {
                    const textarea = document.createElement("textarea");
                    textarea.value = text;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand("copy");
                    document.body.removeChild(textarea);
                    alert("Doodle text copied!");
                });
        }

        function copyTeamCode() {
            if (currentTeamIndex === -1) return;
            
            try {
                const team = teams[currentTeamIndex];
                let teamText = `Team: ${team.name}\n\n`;
                
                team.doodles.forEach((doodle, index) => {
                    teamText += `Slot ${index + 1}:\n`;
                    
                    teamText += `${doodle.name} @ ${doodle.heldItem || "None"} - ${doodle.trait || "No Trait"} - ${doodle.equipment.helmet}/${doodle.equipment.amulet}/${doodle.equipment.artifact}`;
                    
                    const statsText = doodle.stats.filter(s => s).join(", ");
                    if (statsText) {
                        teamText += ` - ${statsText}`;
                    }
                    
                    const moves = doodle.moves.filter(m => m).join("/");
                    if (moves) {
                        teamText += ` - ${moves}`;
                    }
                    
                    teamText += '\n\n';
                });
                
                navigator.clipboard.writeText(teamText)
                    .then(() => alert("Team code copied to clipboard!"))
                    .catch(() => {
                        const textarea = document.createElement("textarea");
                        textarea.value = teamText;
                        document.body.appendChild(textarea);
                        textarea.select();
                        document.execCommand("copy");
                        document.body.removeChild(textarea);
                        alert("Team code copied!");
                    });
            } catch (error) {
                console.error("Copy failed:", error);
                alert("Error generating team code. Check console for details.");
            }
        }

        function importTeamCode() {
            const teamCode = prompt("Paste team code:");
            if (!teamCode) return;

            try {
                if (currentTeamIndex !== -1) {
                    saveCurrentTeamState();
                }
                
                const lines = teamCode.split('\n');
                const teamNameMatch = lines[0].match(/Team: (.+)/);
                const teamName = teamNameMatch ? teamNameMatch[1] : "Imported Team";
                
                const importedDoodles = [];
                let currentDoodle = null;
                
                for (let i = 1; i < lines.length; i++) {
                    const line = lines[i].trim();
                    
                    if (line.startsWith('Slot')) {
                        if (currentDoodle) {
                            importedDoodles.push(currentDoodle);
                        }
                        currentDoodle = {
                            name: "",
                            image: "",
                            type: "",
                            moves: ["", "", "", ""],
                            trait: "",
                            heldItem: "",
                            stats: ["", ""],
                            equipment: {
                                helmet: "None",
                                amulet: "None",
                                artifact: "None"
                            }
                        };
                    } else if (line.includes(' @ ')) {
                        if (currentDoodle) {
                            const parts = line.split(' - ');
                            
                            const doodleItemPart = parts[0];
                            const doodleItemParts = doodleItemPart.split(' @ ');
                            currentDoodle.name = doodleItemParts[0].trim();
                            currentDoodle.heldItem = doodleItemParts.length > 1 ? doodleItemParts[1].trim() : "None";
                            
                            if (parts.length > 1) {
                                currentDoodle.trait = parts[1].trim();
                            }
                            
                            if (parts.length > 2) {
                                const equipmentParts = parts[2].split('/');
                                if (equipmentParts.length >= 1) currentDoodle.equipment.helmet = equipmentParts[0].trim() || "None";
                                if (equipmentParts.length >= 2) currentDoodle.equipment.amulet = equipmentParts[1].trim() || "None";
                                if (equipmentParts.length >= 3) currentDoodle.equipment.artifact = equipmentParts[2].trim() || "None";
                            }
                            
                            if (parts.length > 3 && parts[3].includes('%')) {
                                const statsParts = parts[3].split(',').map(s => s.trim());
                                for (let j = 0; j < Math.min(statsParts.length, 2); j++) {
                                    currentDoodle.stats[j] = statsParts[j];
                                }
                            }
                            
                            let movesIndex = 4;
                            if (parts.length > 3 && !parts[3].includes('%')) {
                                movesIndex = 3;
                            }
                            if (parts.length > movesIndex) {
                                const moves = parts[movesIndex].split('/').map(m => m.trim());
                                for (let j = 0; j < Math.min(moves.length, 4); j++) {
                                    currentDoodle.moves[j] = moves[j];
                                }
                            }
                            
                            const doodleData = doodles.find(d => d.name === currentDoodle.name);
                            if (doodleData) {
                                currentDoodle.image = doodleData.image;
                                currentDoodle.type = doodleData.type;
                            }
                        }
                    }
                }
                
                if (currentDoodle) {
                    importedDoodles.push(currentDoodle);
                }
                
                const teamData = {
                    name: teamName,
                    notes: "",
                    doodles: importedDoodles
                };
                
                if (teams.length < MAX_TEAMS) {
                    teams.push(teamData);
                    currentTeamIndex = teams.length - 1;
                    updateTeamSelect();
                    loadTeam(currentTeamIndex);
                    saveToStorage();
                    alert("Team imported successfully as a new team!");
                } else {
                    if (confirm("No space for new team. Replace current team?")) {
                        teams[currentTeamIndex] = teamData;
                        loadTeam(currentTeamIndex);
                        saveToStorage();
                        alert("Team imported successfully (replaced current team)!");
                    }
                }
            } catch (error) {
                console.error("Import failed:", error);
                alert("Invalid team code! Please check and try again.");
            }
        }

        function importFromText() {
            const text = prompt("Paste Doodle text (format: Doodle @ Item - Trait - Helmet/Amulet/Artifact - +10%, +10% - Move/Move/Move/Move)");
            if (!text) return;

            try {
                const parts = text.split(' - ');
                
                const doodleItemPart = parts[0];
                const doodleItemParts = doodleItemPart.split(' @ ');
                const doodleName = doodleItemParts[0].trim();
                const heldItem = doodleItemParts.length > 1 ? doodleItemParts[1].trim() : "None";
                
                const trait = parts.length > 1 ? parts[1].trim() : "";
                
                let equipment = { helmet: "None", amulet: "None", artifact: "None" };
                if (parts.length > 2) {
                    const equipmentParts = parts[2].split('/');
                    if (equipmentParts.length >= 1) equipment.helmet = equipmentParts[0].trim() || "None";
                    if (equipmentParts.length >= 2) equipment.amulet = equipmentParts[1].trim() || "None";
                    if (equipmentParts.length >= 3) equipment.artifact = equipmentParts[2].trim() || "None";
                }
                
                let stats = ["", ""];
                if (parts.length > 3 && parts[3].includes('%')) {
                    const statsParts = parts[3].split(',').map(s => s.trim());
                    for (let j = 0; j < Math.min(statsParts.length, 2); j++) {
                        stats[j] = statsParts[j];
                    }
                }
                
                let moves = ["", "", "", ""];
                let movesIndex = 4;
                if (parts.length > 3 && !parts[3].includes('%')) {
                    movesIndex = 3;
                }
                if (parts.length > movesIndex) {
                    const movesParts = parts[movesIndex].split('/').map(m => m.trim());
                    for (let j = 0; j < Math.min(movesParts.length, 4); j++) {
                        moves[j] = movesParts[j];
                    }
                }
                
                if (currentTeamIndex === -1 || teams[currentTeamIndex].doodles.length >= 6) {
                    alert("Team is full! Clear a slot first.");
                    return;
                }
                
                const doodle = doodles.find(d => d.name === doodleName);
                if (!doodle) {
                    alert("Doodle not found in database!");
                    return;
                }
                
                teams[currentTeamIndex].doodles.push({
                    name: doodle.name,
                    image: doodle.image,
                    type: doodle.type,
                    moves: moves,
                    trait: trait,
                    heldItem: heldItem,
                    stats: stats,
                    equipment: equipment
                });
                
                renderTeam();
                saveToStorage();
                alert("Doodle imported successfully!");
            } catch (error) {
                console.error("Import failed:", error);
                alert("Error importing doodle. Please check the format and try again.");
            }
        }

        function loadTeam(index) {
            if (index < 0 || index >= teams.length) return;
            
            const team = teams[index];
            document.getElementById('team-name').value = team.name;
            renderTeam();
        }

        function loadFromStorage() {
            const savedTeams = localStorage.getItem('doodleTeams');
            const savedIndex = localStorage.getItem('currentTeamIndex');
            
            if (savedTeams) {
                teams = JSON.parse(savedTeams);
                currentTeamIndex = parseInt(savedIndex) || 0;
                return true;
            }
            return false;
        }

        function saveToStorage() {
            localStorage.setItem('doodleTeams', JSON.stringify(teams));
            localStorage.setItem('currentTeamIndex', currentTeamIndex);
        }

        function initializeDefensiveCalculator() {
            document.getElementById('add-defensive').addEventListener('click', addDefensiveDoodle);
            document.getElementById('save-defensive').addEventListener('click', saveDefensiveTeam);
            document.getElementById('load-defensive').addEventListener('click', loadDefensiveTeam);
            document.getElementById('load-from-teambuilder').addEventListener('click', loadDefensiveFromTeambuilder);
            
            createDefensiveDoodleBox();
        }

        function createDefensiveDoodleBox() {
            const container = document.getElementById('defensive-container');
            const box = document.createElement('div');
            box.className = 'calculator-box';
            box.dataset.index = defensiveDoodleCount;
            
            const header = document.createElement('div');
            header.className = 'calculator-header';
            
            const title = document.createElement('h3');
            title.textContent = `Doodle ${defensiveDoodleCount}`;
            
            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-calc';
            removeBtn.textContent = '×';
            removeBtn.onclick = function() {
                container.removeChild(box);
                updateDefensiveSummary();
            };
            
            header.appendChild(title);
            header.appendChild(removeBtn);
            
            box.innerHTML = `
                <div class="type-select-container">
                    <select class="type-select primary-type" data-doodle="${defensiveDoodleCount}">
                        <option value="">Primary Type</option>
                        ${allTypes.map(type => `<option value="${type}">${type.charAt(0).toUpperCase() + type.slice(1)}</option>`).join('')}
                    </select>
                    <select class="type-select secondary-type" data-doodle="${defensiveDoodleCount}">
                        <option value="">Secondary Type</option>
                        ${allTypes.map(type => `<option value="${type}">${type.charAt(0).toUpperCase() + type.slice(1)}</option>`).join('')}
                    </select>
                    <select class="type-select trait" data-doodle="${defensiveDoodleCount}">
                        <option value="">Trait</option>
                        ${traits.map(trait => `<option value="${trait}">${trait}</option>`).join('')}
                    </select>
                </div>
                
                <div class="result-title">Weaknesses:</div>
                <div class="result-list weaknesses" data-doodle="${defensiveDoodleCount}"><span class="none">None</span></div>
                
                <div class="result-title">Resistances:</div>
                <div class="result-list resistances" data-doodle="${defensiveDoodleCount}"><span class="none">None</span></div>
                
                <div class="result-title">Immunities:</div>
                <div class="result-list immunities" data-doodle="${defensiveDoodleCount}"><span class="none">None</span></div>
            `;
            
            box.prepend(header);
            container.appendChild(box);
            defensiveDoodleCount++;
            
            box.querySelectorAll('.type-select').forEach(select => {
                select.addEventListener('change', updateDefensiveCoverage);
            });
        }

        function addDefensiveDoodle() {
            const container = document.getElementById('defensive-container');
            if (container.children.length < 6) {
                createDefensiveDoodleBox();
            } else {
                alert('Maximum of 6 doodles reached!');
            }
        }

        function updateDefensiveCoverage() {
            const doodleIndex = this.getAttribute('data-doodle');
            const box = document.querySelector(`.calculator-box[data-index="${doodleIndex}"]`);
            
            const primaryType = box.querySelector(`.primary-type[data-doodle="${doodleIndex}"]`).value;
            const secondaryType = box.querySelector(`.secondary-type[data-doodle="${doodleIndex}"]`).value;
            const trait = box.querySelector(`.trait[data-doodle="${doodleIndex}"]`).value;

            if (!primaryType) {
                box.querySelector(`.weaknesses[data-doodle="${doodleIndex}"]`).innerHTML = '<span class="none">None</span>';
                box.querySelector(`.resistances[data-doodle="${doodleIndex}"]`).innerHTML = '<span class="none">None</span>';
                box.querySelector(`.immunities[data-doodle="${doodleIndex}"]`).innerHTML = '<span class="none">None</span>';
                updateDefensiveSummary();
                return;
            }

            const weaknesses = calculateWeaknesses(primaryType, secondaryType, trait);
            const resistances = calculateResistances(primaryType, secondaryType, trait);
            const immunities = calculateImmunities(primaryType, secondaryType, trait);

            updateDefensiveResultList(`.weaknesses[data-doodle="${doodleIndex}"]`, weaknesses, 'weakness');
            updateDefensiveResultList(`.resistances[data-doodle="${doodleIndex}"]`, resistances, 'resist');
            updateDefensiveResultList(`.immunities[data-doodle="${doodleIndex}"]`, immunities);

            updateDefensiveSummary();
        }

        function calculateWeaknesses(primary, secondary, trait) {
            const results = {};

            allTypes.forEach(attackingType => {
                const primaryEffect = typeChart[primary][attackingType];
                const secondaryEffect = secondary ? typeChart[secondary][attackingType] : 1;
                let combinedEffect = primaryEffect * secondaryEffect;

                combinedEffect = applyTraitEffects(primary, secondary, trait, attackingType, combinedEffect);

                if (combinedEffect > 1) {
                    if (combinedEffect >= 3.5) { 
                        results[attackingType] = 'weak-4x';
                    } else if (combinedEffect > 1.5) {
                        results[attackingType] = 'weak-2x';
                    } else if (combinedEffect > 1.1) {
                        results[attackingType] = 'weak-075x';
                    }
                }
            });

            return results;
        }

        function calculateResistances(primary, secondary, trait) {
            const results = {};

            allTypes.forEach(attackingType => {
                const primaryEffect = typeChart[primary][attackingType];
                const secondaryEffect = secondary ? typeChart[secondary][attackingType] : 1;
                let combinedEffect = primaryEffect * secondaryEffect;

                combinedEffect = applyTraitEffects(primary, secondary, trait, attackingType, combinedEffect);

                if (combinedEffect < 1 && combinedEffect > 0) {
                    if (combinedEffect <= 0.26) { 
                        results[attackingType] = 'resist-025x';
                    } else if (combinedEffect < 0.9) {
                        results[attackingType] = 'resist-05x';
                    }
                }
            });

            return results;
        }

        function calculateImmunities(primary, secondary, trait) {
            const results = {};

            allTypes.forEach(attackingType => {
                const primaryEffect = typeChart[primary][attackingType];
                const secondaryEffect = secondary ? typeChart[secondary][attackingType] : 1;
                let combinedEffect = primaryEffect * secondaryEffect;

                combinedEffect = applyTraitEffects(primary, secondary, trait, attackingType, combinedEffect);

                if (Math.abs(combinedEffect) < 0.1) { 
                    results[attackingType] = 'immune';
                }
            });

            return results;
        }

        function applyTraitEffects(primary, secondary, trait, attackingType, effectiveness) {
            return effectiveness;
        }

        function createTypeBadge(type, text, effect = '') {
            const badge = document.createElement('span');
            badge.className = `calc-type-badge ${type} ${effect}`;
            badge.style.backgroundColor = typeColors[type.charAt(0).toUpperCase() + type.slice(1)] || typeColors['Basic'];
            
            const icon = document.createElement('span');
            icon.className = 'type-icon';
            icon.style.backgroundImage = `url(${typeIcons[type.charAt(0).toUpperCase() + type.slice(1)] || typeIcons['Basic']})`;
            badge.appendChild(icon);
            
            const textNode = document.createTextNode(text);
            badge.appendChild(textNode);
            
            return badge;
        }

        function updateDefensiveResultList(selector, typeEffects, effectType = '') {
            const element = document.querySelector(selector);

            if (!element) return;
            
            if (Object.keys(typeEffects).length === 0) {
                element.innerHTML = '<span class="none">None</span>';
                return;
            }

            element.innerHTML = '';

            const typesArray = Object.entries(typeEffects)
                .sort((a, b) => {
                    if (a[1] !== b[1]) {
                        return a[1].localeCompare(b[1]);
                    }
                    return a[0].localeCompare(b[0]);
                });

            typesArray.forEach(([type, effect]) => {
                let badgeText = type.charAt(0).toUpperCase() + type.slice(1);
                if (effect === 'weak-4x') badgeText += ' (4×)';
                else if (effect === 'weak-2x') badgeText += ' (2×)';
                else if (effect === 'weak-075x') badgeText += ' (1.5×)';
                else if (effect === 'resist-025x') badgeText += ' (¼×)';
                else if (effect === 'resist-05x') badgeText += ' (½×)';

                const badge = createTypeBadge(type, badgeText, effect);
                element.appendChild(badge);
            });
        }

        function updateDefensiveSummary() {
            const allWeaknesses = {};
            const allResistances = {};
            const allImmunities = new Set();

            document.querySelectorAll('#defensive-container .calculator-box').forEach((box) => {
                const primary = box.querySelector('.primary-type')?.value;
                const secondary = box.querySelector('.secondary-type')?.value;
                const trait = box.querySelector('.trait')?.value;

                if (primary) {
                    const weaknesses = calculateWeaknesses(primary, secondary, trait);
                    Object.entries(weaknesses).forEach(([type, effect]) => {
                        if (!allWeaknesses[type]) allWeaknesses[type] = { count: 0, maxEffect: effect };
                        allWeaknesses[type].count++;
                        if (effect === 'weak-4x') allWeaknesses[type].maxEffect = 'weak-4x';
                        else if (allWeaknesses[type].maxEffect !== 'weak-4x' && effect === 'weak-2x') {
                            allWeaknesses[type].maxEffect = 'weak-2x';
                        }
                        else if (allWeaknesses[type].maxEffect !== 'weak-4x' && 
                                 allWeaknesses[type].maxEffect !== 'weak-2x' && 
                                 effect === 'weak-075x') {
                            allWeaknesses[type].maxEffect = 'weak-075x';
                        }
                    });

                    const resistances = calculateResistances(primary, secondary, trait);
                    Object.entries(resistances).forEach(([type, effect]) => {
                        if (!allResistances[type]) allResistances[type] = { count: 0, maxEffect: effect };
                        allResistances[type].count++;
                        if (effect === 'resist-025x') allResistances[type].maxEffect = 'resist-025x';
                        else if (allResistances[type].maxEffect !== 'resist-025x' && effect === 'resist-05x') {
                            allResistances[type].maxEffect = 'resist-05x';
                        }
                    });

                    const immunities = calculateImmunities(primary, secondary, trait);
                    Object.keys(immunities).forEach(type => {
                        allImmunities.add(type);
                    });
                }
            });

            updateDefensiveTeamResultList('#team-weaknesses', allWeaknesses, 'weakness');
            updateDefensiveTeamResultList('#team-resistances', allResistances, 'resist');
            updateDefensiveTeamResultList('#team-immunities', allImmunities);

            const noResistances = allTypes.filter(type => {
                return !allResistances[type] && !allImmunities.has(type);
            });
            updateDefensiveTeamResultList('#team-no-resistances', noResistances);
        }

        function updateDefensiveTeamResultList(selector, typeData, effectType = '') {
            const element = document.querySelector(selector);

            if ((effectType === 'weakness' || effectType === 'resist') ? 
                Object.keys(typeData).length === 0 : typeData.size === 0) {
                element.innerHTML = '<span class="none">None</span>';
                return;
            }

            element.innerHTML = '';

            let typesArray;
            if (effectType === 'weakness' || effectType === 'resist') {
                typesArray = Object.entries(typeData)
                    .map(([type, data]) => ({
                        type,
                        count: typeof data === 'object' ? data.count : 0,
                        effect: typeof data === 'object' ? data.maxEffect : data
                    }))
                    .sort((a, b) => {
                        if (b.count !== a.count) return b.count - a.count;
                        if (b.effect !== a.effect) return b.effect.localeCompare(a.effect);
                        return a.type.localeCompare(b.type);
                    });
            } else {
                typesArray = Array.isArray(typeData) ? 
                    typeData.sort((a, b) => a.localeCompare(b)) : 
                    Array.from(typeData).sort((a, b) => a.localeCompare(b));
            }

            typesArray.forEach(type => {
                let typeName = typeof type === 'object' ? type.type : type;
                let effect = typeof type === 'object' ? type.effect : '';
                let count = typeof type === 'object' ? type.count : 0;

                let badgeText = typeName.charAt(0).toUpperCase() + typeName.slice(1);
                if (effectType === 'weakness' || effectType === 'resist') {
                    if (count > 0) {
                        badgeText += ` (${count})`;
                    }
                    if (effect === 'weak-4x') badgeText += ' 4×';
                    else if (effect === 'weak-2x') badgeText += ' 2×';
                    else if (effect === 'weak-075x') badgeText += ' 1.5×';
                    else if (effect === 'resist-025x') badgeText += ' ¼×';
                    else if (effect === 'resist-05x') badgeText += ' ½×';
                }

                const badge = createTypeBadge(typeName, badgeText, effect);
                element.appendChild(badge);
            });
        }

        function saveDefensiveTeam() {
            const teamData = {
                doodles: []
            };

            document.querySelectorAll('#defensive-container .calculator-box').forEach((box, index) => {
                const doodleIndex = box.dataset.index;
                const doodleData = { index: doodleIndex };
                
                doodleData.primaryType = box.querySelector(`.primary-type[data-doodle="${doodleIndex}"]`).value;
                doodleData.secondaryType = box.querySelector(`.secondary-type[data-doodle="${doodleIndex}"]`).value;
                doodleData.trait = box.querySelector(`.trait[data-doodle="${doodleIndex}"]`).value;
                
                teamData.doodles.push(doodleData);
            });

            localStorage.setItem('defensiveTeam', JSON.stringify(teamData));
            alert('Defensive team saved successfully!');
        }

        function loadDefensiveTeam() {
            const savedTeam = localStorage.getItem('defensiveTeam');
            if (!savedTeam) {
                alert('No saved defensive team found!');
                return;
            }

            const teamData = JSON.parse(savedTeam);
            loadDefensiveDoodles(teamData);
        }

        function loadDefensiveFromTeambuilder() {
            if (teams.length === 0 || currentTeamIndex === -1) {
                alert('No team found in teambuilder!');
                return;
            }

            const team = teams[currentTeamIndex];
            const teamData = {
                doodles: []
            };

            team.doodles.forEach(doodle => {
                const types = doodle.type.split('/');
                const doodleData = {
                    primaryType: types[0].toLowerCase(),
                    secondaryType: types[1] ? types[1].toLowerCase() : "",
                    trait: doodle.trait
                };
                teamData.doodles.push(doodleData);
            });

            loadDefensiveDoodles(teamData);
            alert('Team loaded from teambuilder!');
        }

        function loadDefensiveDoodles(teamData) {
            const container = document.getElementById('defensive-container');
            container.innerHTML = '';
            defensiveDoodleCount = 1;
            
            teamData.doodles.forEach((doodleData, index) => {
                createDefensiveDoodleBox();
                const box = document.querySelector(`#defensive-container .calculator-box[data-index="${defensiveDoodleCount - 1}"]`);
                
                if (doodleData.primaryType) {
                    box.querySelector(`.primary-type[data-doodle="${defensiveDoodleCount - 1}"]`).value = doodleData.primaryType;
                }
                if (doodleData.secondaryType) {
                    box.querySelector(`.secondary-type[data-doodle="${defensiveDoodleCount - 1}"]`).value = doodleData.secondaryType;
                }
                if (doodleData.trait) {
                    box.querySelector(`.trait[data-doodle="${defensiveDoodleCount - 1}"]`).value = doodleData.trait;
                }
                
                if (box.querySelector('.primary-type')) {
                    box.querySelector('.primary-type').dispatchEvent(new Event('change'));
                }
            });
            
            updateDefensiveSummary();
            alert('Defensive team loaded successfully!');
        }

        function initializeOffensiveCalculator() {
            document.getElementById('add-offensive').addEventListener('click', addOffensiveDoodle);
            document.getElementById('save-offensive').addEventListener('click', saveOffensiveTeam);
            document.getElementById('load-offensive').addEventListener('click', loadOffensiveTeam);
            document.getElementById('load-from-teambuilder-offensive').addEventListener('click', loadOffensiveFromTeambuilder);
            
            createOffensiveDoodleBox();
        }

        function createOffensiveDoodleBox() {
            const container = document.getElementById('offensive-container');
            const box = document.createElement('div');
            box.className = 'calculator-box';
            box.dataset.index = offensiveDoodleCount;
            
            const header = document.createElement('div');
            header.className = 'calculator-header';
            
            const title = document.createElement('h3');
            title.textContent = `Doodle ${offensiveDoodleCount}`;
            
            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-calc';
            removeBtn.textContent = '×';
            removeBtn.onclick = function() {
                container.removeChild(box);
                updateOffensiveSummary();
            };
            
            header.appendChild(title);
            header.appendChild(removeBtn);
            
            const typeSelectsHTML = Array(4).fill().map((_, i) => `
                <select class="type-select offensive-type" data-doodle="${offensiveDoodleCount}">
                    <option value="">Move ${i+1}</option>
                    ${allTypes.map(type => `<option value="${type}">${type.charAt(0).toUpperCase() + type.slice(1)}</option>`).join('')}
                </select>
            `).join('');
            
            box.innerHTML = `
                <div class="type-select-container" id="offensive-type-container-${offensiveDoodleCount}">
                    ${typeSelectsHTML}
                </div>
                
                <div class="result-title">Super Effective Against:</div>
                <div class="result-list offensive" data-doodle="${offensiveDoodleCount}"><span class="none">None</span></div>
            `;
            
            box.prepend(header);
            container.appendChild(box);
            offensiveDoodleCount++;
            
            box.querySelectorAll('.offensive-type').forEach(select => {
                select.addEventListener('change', updateOffensiveCoverage);
            });
        }

        function addOffensiveDoodle() {
            const container = document.getElementById('offensive-container');
            if (container.children.length < 6) {
                createOffensiveDoodleBox();
            } else {
                alert('Maximum of 6 doodles reached!');
            }
        }

        function updateOffensiveCoverage() {
            const doodleIndex = this.getAttribute('data-doodle');
            const box = document.querySelector(`#offensive-container .calculator-box[data-index="${doodleIndex}"]`);
            
            const typeSelects = box.querySelectorAll('.offensive-type');
            const selectedTypes = Array.from(typeSelects)
                .map(select => select.value)
                .filter(type => type !== "");
            
            if (selectedTypes.length === 0) {
                box.querySelector(`.offensive[data-doodle="${doodleIndex}"]`).innerHTML = '<span class="none">None</span>';
                updateOffensiveSummary();
                return;
            }

            const offensiveCoverage = calculateOffensiveCoverage(selectedTypes);
            updateOffensiveResultList(`.offensive[data-doodle="${doodleIndex}"]`, offensiveCoverage, 'offensive');

            updateOffensiveSummary();
        }

        function calculateOffensiveCoverage(types) {
            const results = {};
            
            types.forEach(type => {
                allTypes.forEach(defendingType => {
                    const effectiveness = typeChart[defendingType][type];
                    
                    if (effectiveness > 1) {
                        if (!results[defendingType] || effectiveness > results[defendingType].effectiveness) {
                            results[defendingType] = {
                                effectiveness: effectiveness,
                                attackingType: type
                            };
                        }
                    }
                });
            });
            
            const formattedResults = {};
            Object.entries(results).forEach(([defendingType, data]) => {
                if (data.effectiveness >= 3.5) {
                    formattedResults[defendingType] = 'weak-4x';
                } else if (data.effectiveness > 1.5) {
                    formattedResults[defendingType] = 'weak-2x';
                } else if (data.effectiveness > 1.1) {
                    formattedResults[defendingType] = 'weak-075x';
                }
            });
            
            return formattedResults;
        }

        function updateOffensiveResultList(selector, typeEffects, effectType = '') {
            const element = document.querySelector(selector);

            if (!element) return;
            
            if (Object.keys(typeEffects).length === 0) {
                element.innerHTML = '<span class="none">None</span>';
                return;
            }

            element.innerHTML = '';

            const typesArray = Object.entries(typeEffects)
                .sort((a, b) => {
                    if (a[1] !== b[1]) {
                        return a[1].localeCompare(b[1]);
                    }
                    return a[0].localeCompare(b[0]);
                });

            typesArray.forEach(([type, effect]) => {
                let badgeText = type.charAt(0).toUpperCase() + type.slice(1);
                if (effect === 'weak-4x') badgeText += ' (4×)';
                else if (effect === 'weak-2x') badgeText += ' (2×)';
                else if (effect === 'weak-075x') badgeText += ' (1.5×)';

                const badge = createTypeBadge(type, badgeText, effect);
                element.appendChild(badge);
            });
        }

        function updateOffensiveSummary() {
            const allCoverage = {};
            const allTeamTypes = [];
            
            document.querySelectorAll('#offensive-container .calculator-box').forEach((box) => {
                const typeSelects = box.querySelectorAll('.offensive-type');
                const selectedTypes = Array.from(typeSelects)
                    .map(select => select.value)
                    .filter(type => type !== "");
                
                if (selectedTypes.length > 0) {
                    allTeamTypes.push(...selectedTypes);
                    const coverage = calculateOffensiveCoverage(selectedTypes);
                    Object.keys(coverage).forEach(type => {
                        if (!allCoverage[type]) allCoverage[type] = 0;
                        allCoverage[type]++;
                    });
                }
            });
            
            const coverageData = {};
            Object.entries(allCoverage).forEach(([type, count]) => {
                coverageData[type] = { count, maxEffect: 'weak-2x' };
            });
            
            updateOffensiveTeamResultList('#offensive-coverage', coverageData, 'weakness');
            
            const notEffective = calculateNotEffectiveTypes(allTeamTypes);
            updateOffensiveTeamResultList('#offensive-not-effective', notEffective, 'resist');
            
            document.getElementById('offensive-resisted').innerHTML = '<span class="none">N/A</span>';
            document.getElementById('offensive-gaps').innerHTML = '<span class="none">N/A</span>';
        }

        function calculateNotEffectiveTypes(types) {
            const notEffective = {};
            
            allTypes.forEach(defendingType => {
                let isEffective = false;
                
                types.forEach(type => {
                    const effectiveness = typeChart[defendingType][type];
                    if (effectiveness > 1) {
                        isEffective = true;
                    }
                });
                
                if (!isEffective) {
                    let resistanceLevel = 1;
                    types.forEach(type => {
                        const effectiveness = typeChart[defendingType][type];
                        if (effectiveness < 1) {
                            resistanceLevel *= effectiveness;
                        }
                    });
                    
                    if (resistanceLevel < 1) {
                        if (resistanceLevel <= 0.26) {
                            notEffective[defendingType] = 'resist-025x';
                        } else {
                            notEffective[defendingType] = 'resist-05x';
                        }
                    } else {
                        notEffective[defendingType] = 'neutral';
                    }
                }
            });
            
            return notEffective;
        }

        function updateOffensiveTeamResultList(selector, typeData, effectType = '') {
            const element = document.querySelector(selector);

            if (Object.keys(typeData).length === 0) {
                element.innerHTML = '<span class="none">None</span>';
                return;
            }

            element.innerHTML = '';

            const typesArray = Object.entries(typeData)
                .map(([type, data]) => ({
                    type,
                    count: typeof data === 'object' ? data.count : 0,
                    effect: typeof data === 'object' ? data.maxEffect : data
                }))
                .sort((a, b) => {
                    if (b.count !== a.count) return b.count - a.count;
                    if (b.effect !== a.effect) return b.effect.localeCompare(a.effect);
                    return a.type.localeCompare(b.type);
                });

            typesArray.forEach(type => {
                let typeName = type.type;
                let effect = type.effect;
                let count = type.count;

                let badgeText = typeName.charAt(0).toUpperCase() + typeName.slice(1);
                if (effectType === 'weakness' || effectType === 'resist') {
                    if (count > 0) {
                        badgeText += ` (${count})`;
                    }
                    if (effect === 'weak-4x') badgeText += ' 4×';
                    else if (effect === 'weak-2x') badgeText += ' 2×';
                    else if (effect === 'weak-075x') badgeText += ' 1.5×';
                    else if (effect === 'resist-025x') badgeText += ' ¼×';
                    else if (effect === 'resist-05x') badgeText += ' ½×';
                }

                const badge = createTypeBadge(typeName, badgeText, effect);
                element.appendChild(badge);
            });
        }

        function saveOffensiveTeam() {
            const teamData = {
                doodles: []
            };

            document.querySelectorAll('#offensive-container .calculator-box').forEach((box, index) => {
                const doodleIndex = box.dataset.index;
                const doodleData = { index: doodleIndex };
                
                const typeSelects = box.querySelectorAll('.offensive-type');
                doodleData.types = Array.from(typeSelects).map(select => select.value).filter(val => val);
                
                teamData.doodles.push(doodleData);
            });

            localStorage.setItem('offensiveTeam', JSON.stringify(teamData));
            alert('Offensive team saved successfully!');
        }

        function loadOffensiveTeam() {
            const savedTeam = localStorage.getItem('offensiveTeam');
            if (!savedTeam) {
                alert('No saved offensive team found!');
                return;
            }

            const teamData = JSON.parse(savedTeam);
            loadOffensiveDoodles(teamData);
        }

        function loadOffensiveFromTeambuilder() {
            if (teams.length === 0 || currentTeamIndex === -1) {
                alert('No team found in teambuilder!');
                return;
            }

            const team = teams[currentTeamIndex];
            const teamData = {
                doodles: []
            };

            team.doodles.forEach(doodle => {
                const moveTypes = doodle.moves
                    .filter(move => move !== "")
                    .map(move => getMoveType(move).toLowerCase());

                const doodleData = {
                    types: moveTypes
                };
                teamData.doodles.push(doodleData);
            });

            loadOffensiveDoodles(teamData);
            alert('Team loaded from teambuilder!');
        }

        function loadOffensiveDoodles(teamData) {
            const container = document.getElementById('offensive-container');
            container.innerHTML = '';
            offensiveDoodleCount = 1;
            
            teamData.doodles.forEach((doodleData, index) => {
                createOffensiveDoodleBox();
                const box = document.querySelector(`#offensive-container .calculator-box[data-index="${offensiveDoodleCount - 1}"]`);
                
                if (doodleData.types && doodleData.types.length > 0) {
                    const typeContainer = box.querySelector(`#offensive-type-container-${offensiveDoodleCount - 1}`);
                    const typeSelects = typeContainer.querySelectorAll('.offensive-type');
                    
                    for (let i = 0; i < Math.min(doodleData.types.length, typeSelects.length); i++) {
                        typeSelects[i].value = doodleData.types[i];
                    }
                }
                
                if (box.querySelector('.offensive-type')) {
                    box.querySelector('.offensive-type').dispatchEvent(new Event('change'));
                }
            });
            
            updateOffensiveSummary();
            alert('Offensive team loaded successfully!');
        }
    </script>
</body>
</html>
